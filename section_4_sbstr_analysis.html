<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>10&nbsp; SBSTR Analysis – Reaction Engineering Basics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./section_4_non_continuous_design.html" rel="next">
<link href="./section_4_bstr_analysis.html" rel="prev">
<link href="./Graphics/BuffaloBadger_16_16.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="http://buffalobadger.github.io" class="navbar-brand navbar-brand-logo">
    <img src="./Graphics/Banner.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="http://buffalobadger.github.io/RE_Basics"> 
<span class="menu-text">Reaction Engineering Basics</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="http://buffalobadger.github.io/SCoRE"> 
<span class="menu-text">SCoRE</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="http://buffalobadger.github.io/ToTaL_Engineering"> 
<span class="menu-text">ToTaL Engineering</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="http://buffalobadger.github.io/The_Sett"> 
<span class="menu-text">The Sett</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="http://buffalobadger.github.io/about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./section_4_bstr_analysis.html">Modeling Ideal Reactors</a></li><li class="breadcrumb-item"><a href="./section_4_sbstr_analysis.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">SBSTR Analysis</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_1_intro_safety_ethics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Reaction Engineering, Ethics and Safety</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_1_rxns_reactors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Reactions and Reactors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_1_reaction_progress.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Reaction Progress</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Rate Expressions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_2_rates_and_expressions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Reaction Rates and Rate Expressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_2_mechanisms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Reaction Mechanisms and Mechanistic Rate Expressions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Reaction Engineering Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_3_react_eng_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reaction Engineering Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_3_reaction_engineering_tasks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Reaction Engineering Tasks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_3_formulating_calcs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Completing Reaction Engineering Tasks</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Modeling Ideal Reactors</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_4_bstr_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">BSTR Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_4_sbstr_analysis.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">SBSTR Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_4_non_continuous_design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Design of Non-Continuous Reactors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_4_cstr_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">CSTR Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_4_pfr_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">PFR Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_4_continuous_design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Design of Continuous Reactors</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Modeling Ideal Reactor Systems</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_5_reactor_networks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Reactor Networks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_5_thermally_backmixed_pfr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Thermally Back-Mixed PFRs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_5_recycle_pfr.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Recycle PFRs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Kinetics Data Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_6_data_generation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Generation and Analysis of Kinetics Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_6_bstr_data_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Analysis of Kinetics Data from a BSTR</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_6_cstr_data_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Analysis of Kinetics Data from a CSTR</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_6_pfr_data_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Analysis of Kinetics Data from a PFR</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Modeling Non-Ideal Reactors</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_7_age_function.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">The Age Distribution Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_7_segregated_flow_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">A Segregated Flow Reactor Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_7_axial_dispersion_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">The Steady-State Axial Dispersion Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./section_7_zoned_model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Zoned Reactor Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apndx_prereq_knowledge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Prerequisite Knowledge</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apndx_nomenclature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Terminology and Sign Conventions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apndx_reaction_thermo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Reaction Thermodynamics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apndx_kinetics_theories.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Kinetics Theories{#sec-apndx_kin_theories}</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apndx_derivations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Derivation of Model Equations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apndx_mathematics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Mathematics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./apndx_useful_eqns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Frequently Used Equations</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sbstr-characteristics" id="toc-sbstr-characteristics" class="nav-link active" data-scroll-target="#sbstr-characteristics"><span class="header-section-number">10.1</span> SBSTR Characteristics</a>
  <ul class="collapse">
  <li><a href="#batch-fed-sbstrs" id="toc-batch-fed-sbstrs" class="nav-link" data-scroll-target="#batch-fed-sbstrs"><span class="header-section-number">10.1.1</span> Batch-Fed SBSTRs</a></li>
  <li><a href="#reactive-separation-sbstrs" id="toc-reactive-separation-sbstrs" class="nav-link" data-scroll-target="#reactive-separation-sbstrs"><span class="header-section-number">10.1.2</span> Reactive Separation SBSTRs</a></li>
  <li><a href="#other-advantages-and-disadvantages-of-sbstrs" id="toc-other-advantages-and-disadvantages-of-sbstrs" class="nav-link" data-scroll-target="#other-advantages-and-disadvantages-of-sbstrs"><span class="header-section-number">10.1.3</span> Other Advantages and Disadvantages of SBSTRs</a></li>
  </ul></li>
  <li><a href="#sbstr-operation" id="toc-sbstr-operation" class="nav-link" data-scroll-target="#sbstr-operation"><span class="header-section-number">10.2</span> SBSTR Operation</a></li>
  <li><a href="#sbstr-design-equations" id="toc-sbstr-design-equations" class="nav-link" data-scroll-target="#sbstr-design-equations"><span class="header-section-number">10.3</span> SBSTR Design Equations</a></li>
  <li><a href="#general-approach-to-modeling-sbstrs" id="toc-general-approach-to-modeling-sbstrs" class="nav-link" data-scroll-target="#general-approach-to-modeling-sbstrs"><span class="header-section-number">10.4</span> General Approach to Modeling SBSTRs</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples"><span class="header-section-number">10.5</span> Examples</a>
  <ul class="collapse">
  <li><a href="#sec-example_10_1" id="toc-sec-example_10_1" class="nav-link" data-scroll-target="#sec-example_10_1"><span class="header-section-number">10.5.1</span> Response of an SBSTR During Acid Neutralization</a></li>
  <li><a href="#sec-example_10_2" id="toc-sec-example_10_2" class="nav-link" data-scroll-target="#sec-example_10_2"><span class="header-section-number">10.5.2</span> Yield in an SBSTR</a></li>
  <li><a href="#sec-example_10_3" id="toc-sec-example_10_3" class="nav-link" data-scroll-target="#sec-example_10_3"><span class="header-section-number">10.5.3</span> Maximizing the Net Rate in an SBSTR</a></li>
  </ul></li>
  <li><a href="#symbols-used-in-sec-4_sbstr_analysis" id="toc-symbols-used-in-sec-4_sbstr_analysis" class="nav-link" data-scroll-target="#symbols-used-in-sec-4_sbstr_analysis"><span class="header-section-number">10.6</span> Symbols Used in <span>Chapter 10</span></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./section_4_bstr_analysis.html">Modeling Ideal Reactors</a></li><li class="breadcrumb-item"><a href="./section_4_sbstr_analysis.html"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">SBSTR Analysis</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-4_sbstr_analysis" class="quarto-section-identifier"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">SBSTR Analysis</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The primary difference between semi-batch stirred tank reactors (SBSTRs) and BSTRs is that fluid flows into <em>or</em> out of an SBSTR during some part of the time when reaction is taking place. This chapter describes operation of semi-batch reactors, examines how flow in or out affects reactor response, and highlights advantages and disadvantages of SBSTRs, particularly as compared to BSTRs. In terms of reactor modeling and analysis, only analysis of SBSTRs where fluid flows <em>in</em> during reaction is described and illustrated. The modeling of SBSTRs where fluid leaves the reactor during reaction is <em>not</em> not considered.</p>
<div id="fig-simple_batch_fed_schematic" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-simple_batch_fed_schematic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Graphics/simple_batch_fed_schematic.png" class="img-fluid figure-img" style="width:30.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-simple_batch_fed_schematic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.1: Simple schematic representation of a fed-batch SBSTR.
</figcaption>
</figure>
</div>
<section id="sbstr-characteristics" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="sbstr-characteristics"><span class="header-section-number">10.1</span> SBSTR Characteristics</h2>
<p>As is the case for the other ideal stirred-tank reactors, one essential characteristic of an SBSTR is that the reacting fluid within it is always perfectly mixed. As discussed in <a href="section_4_bstr_analysis.html" class="quarto-xref"><span>Chapter 9</span></a> for batch reactors, it is not essential that the reactor takes the form of a stirred tank. Any reactor that is perfectly mixed and that has fluid flowing in or out while reaction is occurring can be modeled as an SBSTR. Nonetheless, in commercial practice SBSTRs most commonly are stirred tanks.</p>
<p>The addition and/or removal of heat from the reacting fluid in a stirred tank is described in <a href="apndx_derivations.html#sec-apndx_heat_exch" class="quarto-xref"><span>Section E.1</span></a> for systems where a separate heat exchange fluid is employed. <a href="section_4_bstr_analysis.html" class="quarto-xref"><span>Chapter 9</span></a> describes three geometries involving a perfectly mixed heat exchange fluid: a shell/jacket, an immersed coil, and an external heat exchanger (see <a href="section_4_bstr_analysis.html#fig-bstr_heat_exchange_schematics" class="quarto-xref">Figure&nbsp;<span>9.1</span></a>). These three configurations apply equally to SBSTRs. While other means of heat exchange are sometimes used, <em>Reaction Engineering Basics</em> only considers heat exchange between the reacting fluid and a perfectly mixed heat exchange fluid. Mass and energy balances on the exchange fluid for such systems are considered in <a href="section_3_react_eng_models.html#sec-heat_exchange_eqns" class="quarto-xref">Chapter&nbsp;<span>6.3</span></a> and <a href="apndx_derivations.html#sec-apndx_heat_exch" class="quarto-xref">Appendix&nbsp;<span>E.1</span></a>.</p>
<p>The characteristic that differentiates between a BSTR and an SBSTR is flow of reagents into or out of the reactor while the reaction is taking place. When reagents flow into the reactor during reaction, the SBSTR is sometimes referred to as a “fed-batch” reactor. A common form of semi-batch operation where reacting fluid leaves the reactor involves simple “reactive separation.”</p>
<section id="batch-fed-sbstrs" class="level3" data-number="10.1.1">
<h3 data-number="10.1.1" class="anchored" data-anchor-id="batch-fed-sbstrs"><span class="header-section-number">10.1.1</span> Batch-Fed SBSTRs</h3>
<p>Two advantages over BSTRs can be realized by adding one reagent to an SBSTR over time. One advantage is control of the rate of heat release. An example is the neutralization of a strong acid using a strong base. Such reactions can have very high rates and be highly exothermic. If all of the reagents are added at once, as in a BSTR, it may not be possible to remove heat fast enough to safely control the temperature. By slowly adding one of the reactants over time, the rate of heat release is limited by the rate of reagent addition and not the rate of reaction. The rate of addition can then be matched to the rate at which heat can be removed. In this way, the temperature can be controlled allowing the reaction to occur safely.</p>
<p>When two or more reactions take place, semi-batch operation with the addition of one reagent can sometimes be used to control selectivity. This happens when the rates of the desired and undesired reactions exhibit different dependence upon the concentrations of the reactants. To illustrate, consider a reaction between reagents A and B. In a BSTR process, the concentrations of A and B would be largest at the start of processing and would remain comparable throughout processing. Suppose instead, that reagent A is present at full concentration at the start of processing, but that reagent B is added to it over time. In this way, the concentration of A can be kept as large as possible while that of B is as low as possible over the course of processing. If the rate of the desired reaction is more favored by high concentration of A and low concentration of B, then semi-batch processing will result in better selectivity than batch processing.</p>
<p>The instantaneous selectivity defined in <a href="section_2_rates_and_expressions.html#eq-def_inst_select" class="quarto-xref">Equation&nbsp;<span>4.5</span></a> can be very useful in identifying situations where an SBSTR might present an advantage over a BSTR. Continuing with the example mentioned in the preceding paragraph, suppose that the desired reaction is first order in both reagents, A and B, and that the undesired reaction is second order in reagent B. In this situation, the instantaneous selectivity is given by <a href="#eq-inst_sel_example" class="quarto-xref">Equation&nbsp;<span>10.1</span></a>. The rightmost expression for the selectivity clearly shows that high concentration of A and low concentration of B result in higher selectivity for D over U. <a href="#sec-example_10_2" class="quarto-xref">Example&nbsp;<span>10.5.2</span></a> illustrates this situation.</p>
<p><span id="eq-inst_sel_example"><span class="math display">\[
S_{D/U,inst} = \frac{\displaystyle \sum _j r_{D,j}}{\displaystyle \sum _j r_{U,j}} = \frac{k_DC_AC_B}{k_UC_B^2} = \frac{k_D}{k_U} \frac{C_A}{C_B}
\tag{10.1}\]</span></span></p>
</section>
<section id="reactive-separation-sbstrs" class="level3" data-number="10.1.2">
<h3 data-number="10.1.2" class="anchored" data-anchor-id="reactive-separation-sbstrs"><span class="header-section-number">10.1.2</span> Reactive Separation SBSTRs</h3>
<p>Generally the descriptor, “reactive separation,” applies to a wide range of processes wherein reaction and separation occur simultaneously. A number of different types of reactors fall into the category of reactive separation processes. Membrane reactors and reactive distillation columns are reactive separation devices. For present purposes, the term “reactive separation SBSTR” is limited to a two-phase, stirred-tank reactor, for example a reactor where the reacting fluid is boiling and the resulting vapor is removed during processing.</p>
<p>Reactive separation SBSTRs can offer an advantage when a reversible reaction is taking place. Specifically, if one of the products of the reaction is more volatile than the reactants, higher conversion can result in a reactive separation SBSTR than the conversion that would be realized using a BSTR. When using a BSTR, the maximum possible conversion is that where the reaction is becomes equilibrated. When that conversion is reached, the rate equals zero and no further conversion is possible. In contrast, in a reactive separation SBSTR one of the products of the reaction continually boils off and is removed. As a consequence, at a conversion where the BSTR was equilibrated, the SBSTR is not equilibrated because some of the product has been removed. In this way, a reactive separation SBSTR can reach a greater conversion than is possible in a BSTR.</p>
<p>The modeling and analysis of reactive separation SBSTRs is not considered in <em>Reaction Engineering Basics.</em> The presence of two phases, and particularly the presence of an interface between the two phases introduces the possibility that neither of the two phases is perfectly mixed. Put differently, it is often found that there are concentration gradients in the fluids near either or both sides of the interface. If such concentration gradients exist, then the fluid is not perfectly mixed, and it is necessary to modify the SBSTR design equations. Reacting multi-phase systems with interfacial gradients are typically studied in more advanced courses on reaction engineering.</p>
</section>
<section id="other-advantages-and-disadvantages-of-sbstrs" class="level3" data-number="10.1.3">
<h3 data-number="10.1.3" class="anchored" data-anchor-id="other-advantages-and-disadvantages-of-sbstrs"><span class="header-section-number">10.1.3</span> Other Advantages and Disadvantages of SBSTRs</h3>
<p>BSTRs and SBSTRs are both non-continuous reactors, so in comparison to continuous reactors, they have the same advantages and disadvantages. Their advantages include versatility (using the same reactor at different times to run different reactions) and flexibility such as the ability sequentially vary the processing temperature. Their disadvantages are that their operation is labor intensive and they have lower net rates due to turnaround times. Generally SBSTRs and BSTRs are better suited to production of value added products and not commodity products.</p>
<p>Three possible advantages of SBSTRs over BSTRs have already been mentioned: controling selectivity or temperature using the rate of reagent addition and increasing conversion in reversible reactions by removal of products. When one of these three effects can be used to advantage, an SBSTR is preferred. Arguably, operation of an SBSTR is slightly more involved than that of a BSTR, so without one of those advantages, a BSTR is likely preferred.</p>
</section>
</section>
<section id="sbstr-operation" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="sbstr-operation"><span class="header-section-number">10.2</span> SBSTR Operation</h2>
<p>The operation of SBSTRs is very much like that of BSTRs (see <a href="section_4_bstr_analysis.html" class="quarto-xref"><span>Chapter 9</span></a>), the exception being that during some stages of the operational protocol, reagents are being added to SBSTRs. Operation of SBSTRs includes turnaround time, thereby allowing the definition of a net rate of production of a product like that for BSTRs, <a href="section_4_bstr_analysis.html#eq-bstr_net_rate" class="quarto-xref">Equation&nbsp;<span>9.1</span></a>. Very often, <strong>processes begin as fed semi-batch processes</strong>, but then, when the reactor becomes full, <strong>the feed is stopped and they continue as batch processes</strong>.</p>
<p>When a reagent is fed to an SBSTR, the feed rate is often a critical factor. In some SBSTR processes, the feed rate controls the rate of reaction. Early in the process it may be essential to maintain a low feed rate, and thereby a low reaction rate, in order to control temperature rise. As the process progresses, the reaction rate will naturally decrease due to consumption of the reagent initially added to the reactor. This suggests that the feed rate could be increased over time. Alternatively, there may be a point at which the reaction rate is sufficiently low that it no longer needs to be limited by the feed rate and the remaining fed reactant can be added all at once. The net rate may be larger if a variable feed rate is used. This presents a variety of ways to optimize net rate, yield, or selectivity in an isolated SBSTR process.</p>
</section>
<section id="sbstr-design-equations" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="sbstr-design-equations"><span class="header-section-number">10.3</span> SBSTR Design Equations</h2>
<p>The ideal SBSTR design equations are derived in <a href="apndx_derivations.html#sec-apndx_SBSTR_balances" class="quarto-xref">Appendix&nbsp;<span>E.3</span></a> and they are discussed in <a href="section_3_react_eng_models.html#sec-ideal_bstr_eqns" class="quarto-xref"><span>Section 6.4</span></a>. Energy balances on the heat exchange fluid are discussed in <a href="section_3_react_eng_models.html#sec-heat_exchange_eqns" class="quarto-xref"><span>Section 6.3</span></a>. The SBSTR mole balance, <a href="section_3_react_eng_models.html#eq-sbstr_mol_balance" class="quarto-xref">Equation&nbsp;<span>6.19</span></a>; SBSTR energy balance, <a href="section_3_react_eng_models.html#eq-sbstr_energy_balance" class="quarto-xref">Equation&nbsp;<span>6.20</span></a>; exchange fluid sensible heat energy balance, <a href="section_3_react_eng_models.html#eq-exchange_energy_bal_sensible" class="quarto-xref">Equation&nbsp;<span>6.2</span></a>; and exchange fluid latent heat energy balance, <a href="section_3_react_eng_models.html#eq-exchange_energy_bal_latent" class="quarto-xref">Equation&nbsp;<span>6.6</span></a>; are reproduced below.</p>
<p><span class="math display">\[
\frac{dn_i}{dt} = \dot n_{i,in} + V \sum_j \nu_{i,j}r_j
\]</span></p>
<p><span class="math display">\[
\sum_i \left( n_i \hat C_{p,i}\right)  \frac{dT}{dt} -V\frac{dP}{dt} - P\frac{dV}{dt} = \dot Q - \dot W - \sum_i \dot n_{i,in} \int_{T_{in}}^T \hat C_{p,i}dT  - V\sum_j r_j \Delta H_j
\]</span></p>
<p><span class="math display">\[
\rho_{ex} V_{ex} \tilde C_{p,ex}\frac{dT_{ex}}{dt} = -\dot Q - \dot m_{ex} \int_{T_{ex,in}}^{T_{ex}} \tilde C_{p,ex}dT
\]</span></p>
<p><span class="math display">\[
\frac{\rho_{ex} V_{ex} \Delta H_{\text{latent},ex}^0}{M_{ex}} \frac{d \gamma}{dt} = - \dot Q - \gamma \dot m_{ex} \frac{\Delta H_{\text{latent},ex}^0}{M_{ex}}
\]</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>As was the case with BSTRs, it is important to notice that the <span class="math inline">\(V\frac{dP}{dt}\)</span> and <span class="math inline">\(P\frac{dV}{dt}\)</span> terms in the reacting fluid energy balance will have units of pressure volume time<sup>-1</sup>. Most of the other terms will have units of energy time<sup>-1</sup>. This means that a unit conversion is needed. One easy way to do this is to multiply the <span class="math inline">\(V\frac{dP}{dt}\)</span> and <span class="math inline">\(P\frac{dV}{dt}\)</span> terms by the ideal gas constant in units of energy mol<sup>-1</sup> temperature<sup>-1</sup> and divide by the ideal gas constant in units of pressure volume mol<sup>-1</sup> temperature<sup>-1</sup>. The moles and temperatures cancel out giving the necessary conversion factor. This works even for a liquid phase system because the ideal gas law is not being used as the equation of state (i. e. to convert from pressure volume to mol temperature). In <em>Reaction Engineering Basics</em> the rate of doing work, <span class="math inline">\(\dot{W}\)</span> is almost always negligible. However, if it is non-zero, it will likely have units of power (e. g. hp) or pressure volume time<sup>-1</sup>, and again a unit conversion is needed.</p>
</div>
</div>
</div>
<p>Common simplifications of the SBSTR design equations were presented in <a href="section_3_react_eng_models.html#sec-ideal_sbstr_eqns" class="quarto-xref">Chapter&nbsp;<span>6.5</span></a>. For convenience, they are summarized below. The sensible heat terms in the mole and energy balances above are written in terms of molar heat capacities. They can also be written in terms of the volumetric or gravimetric heat capacity of the reactiong fluid as a whole.</p>
<p><span class="math display">\[
\left(\sum_i n_i \hat C_{p,i} \right) \frac{dT}{dt}\ \Leftrightarrow\ \rho V \tilde C_p \frac{dT}{dt}\ \Leftrightarrow\ V \breve C_p \frac{dT}{dt}
\]</span></p>
<p><span class="math display">\[
\sum_i \dot n_{i,in} \int_{T_{in}}^T \hat C_{p,i}dT\ \Leftrightarrow\ \rho \dot V_{in} \int_{T_{in}}^T \tilde C_pdT\ \Leftrightarrow\ \dot V_{in} \int_{T_{in}}^T \breve C_pdT
\]</span></p>
<p>When the reacting fluid is an ideal gas, the reacting fluid volume, <span class="math inline">\(V\)</span>, is constant (assuming rigid reactor walls), and its time derivative is equal to zero. For an incompressible ideal liquid reacting fluid the time derivative of the reacting fluid volume is equal to the volumetric feed rate, and if the feed rate is constant, that expression can be integrated to get an expression for the reacting fluid volume.</p>
<p><span class="math display">\[
\frac{dV}{dt} = \dot V_{in}
\]</span></p>
<p><span class="math display">\[
V = V_0 + \dot V_{in}t
\]</span></p>
<p>When heat is added or removed using a heat exchange fluid, the rate of heat removal can be expressed in terms of the heat transfer coefficient and area. When rate expressions are substituted into the mole and energy balances, they may introduce concentration or, for gases, partial pressures. The instantaneous values of those composition variables are found using their defining equations. It is important to recognize that unlike a BSTR, the fluid volume in the defining equation for concentration will be changing during the time when feed is being added.</p>
<p><span class="math display">\[
\dot Q = UA\left( T_{ex} - T \right)
\]</span></p>
<p><span class="math display">\[
C_i = \frac{n_i}{V}
\]</span></p>
<p><span class="math display">\[
P_i = \frac{n_iRT}{V}
\]</span></p>
</section>
<section id="general-approach-to-modeling-sbstrs" class="level2" data-number="10.4">
<h2 data-number="10.4" class="anchored" data-anchor-id="general-approach-to-modeling-sbstrs"><span class="header-section-number">10.4</span> General Approach to Modeling SBSTRs</h2>
<p>The analysis of SBSTRs is very similar to the analysis of BSTRs which is described in <a href="section_4_bstr_analysis.html" class="quarto-xref"><span>Chapter 9</span></a>. After identifying the assigment as one involving the analysis of an isolated ideal SBSTR, <a href="section_3_reaction_engineering_tasks.html" class="quarto-xref">Chapter&nbsp;<span>7</span></a>, the analysis can be completed in four general steps (<a href="section_3_formulating_calcs.html" class="quarto-xref">Chapter&nbsp;<span>8</span></a>): summarize the information provided, formulate the solution mathematically, implement the solution numerically, and present and discuss the results.</p>
<p>Summarizing an SBSTR analysis assignment is essentially the same as summarizing a BSTR analysis assignment. As with BSTRs, the summary should indicate the number of stages in the operating protocol. If the reactor operates as an SBSTR in some stages and as a BSTR in others, that information should be included in the summary.</p>
<p>The mathematical formulation will always entail selecting the reactor design equations needed to model each stage of the operating protocol and simplifying them as appropriate for the specific reactor being analyzed. When analyzing an SBSTR, the reactor design equations will always be IVODEs with elapsed time as the independent variable. Because the reactor design equations are IVODEs, the mathematical formulation should also specify the initial values and stopping criterion for each stage of the operational protocol.</p>
<p>It is possible that the number of SBSTR design equations will be one less than the number of dependent variables appearing in them. The reason for this is that the reacting fluid energy balance introduces three dependent variables. Assuming the reactor walls to be rigid, for a gas-phase reacting fluid, <span class="math inline">\(\frac{dV}{dt}\)</span> will equal zero, but both <span class="math inline">\(\frac{dT}{dt}\)</span> and <span class="math inline">\(\frac{dP}{dt}\)</span> will be non-zero. This same situation was encountered with BSTRs, and it is handled in the same way when modeling SBSTRs. A differential form of the ideal gas law, <a href="section_3_react_eng_models.html#eq-differential_ideal_gas_law" class="quarto-xref">Equation&nbsp;<span>6.11</span></a> and below, is used. It is either added to the SBSTR design equations or it is solved for <span class="math inline">\(\frac{dP}{dt}\)</span> and substituted into the energy balance. Either approach results in the number of IVODEs being equal to the number of dependent variables appearing in them.</p>
<p><span class="math display">\[
RT\left( \sum_i \frac{dn_i}{dt} \right) + R\left( \sum_i n_i \right)\frac{dT}{dt} - V \frac{dP}{dt} = 0
\]</span></p>
<p>When modeling liquid phase reactions in BSTRs, the number of design equations was always equal to the number of dependent variables because for liquids both <span class="math inline">\(\frac{dP}{dt}\)</span> and <span class="math inline">\(\frac{dV}{dt}\)</span> are equal to zero for an incompressible ideal liquid reacting in a reactor with solid walls. This is <strong>not</strong> true when processing a liquid in an SBSTR. When processing a liquid, <span class="math inline">\(\frac{dP}{dt}\)</span> will equal zero, but the volume will be changing as described above. In this situation <a href="section_3_react_eng_models.html#eq-sbstr_expansion_term" class="quarto-xref">Equation&nbsp;<span>6.23</span></a> is added to the IVODEs or used to eliminate <span class="math inline">\(\frac{dV}{dt}\)</span> from the reacting fluid energy balance.</p>
<p><span class="math display">\[
\frac{dV}{dt} = \dot V_{in}
\]</span></p>
<p>The remainder of the mathematical formulation is analogous to BSTRs. It involves writing the ancillary equations that are needed in order to evaluate the derivatives at the start of a numerical integration step (i. e. knowing the values of the independent and dependent variables), writing the ancillary equations needed to calculate the initial and final values, and writing the ancillary equations needed to calculated any other quantities of interest once the design equations have been solved. It concludes with concise instructions on how to use the equations to calculate initial and final values, to evaluate the derivatives, and to calculate additional quantities of interest.</p>
<p>Numerical implementation involves writing computer code that follows the instructions at the end of the mathematical formulation. Presentation and discussion of the results is straightforward.</p>
</section>
<section id="examples" class="level2" data-number="10.5">
<h2 data-number="10.5" class="anchored" data-anchor-id="examples"><span class="header-section-number">10.5</span> Examples</h2>
<p>All of the examples presented here involve liquid phase reacting systems. Examples <a href="#sec-example_10_1" class="quarto-xref"><span>10.5.1</span></a> and <a href="#sec-example_10_2" class="quarto-xref"><span>10.5.2</span></a> involve response tasks, while <a href="#sec-example_10_3" class="quarto-xref">Example&nbsp;<span>10.5.3</span></a> entails optimization. Examples <a href="#sec-example_10_1" class="quarto-xref"><span>10.5.1</span></a> and <a href="#sec-example_10_3" class="quarto-xref"><span>10.5.3</span></a> illustrate the use of an SBSTR to control the rate of heat release from a rapid, exothermic reaction. Example -<a href="#sec-example_10_2" class="quarto-xref"><span>Section 10.5.2</span></a> shows how the use of an SGSTR can influence selectivity.</p>
<section id="sec-example_10_1" class="level3" data-number="10.5.1">
<h3 data-number="10.5.1" class="anchored" data-anchor-id="sec-example_10_1"><span class="header-section-number">10.5.1</span> Response of an SBSTR During Acid Neutralization</h3>
<p>A strong acid (15 M) at 20 °C is going to be neutralized using a strong base, B (15 M NaOH), also at 20 °C, equation (1). If the acid and the base were simply mixed together, they would react violenly, releasing enough energy to raise their temperature to over 225 °C. Instead, a 10 L SBSTR will be used to neutralize 5.0 L of the acid. The acid will initially be present in the reactor, and the base will be added a rate of 0.25 L min<sup>-1</sup> until 5 L of the base have been added. The reacting fluid will exchange heat with 2.5 L cooling water in a perfectly mixed shell. Chilled water at 20 °C will enter the shell at a rate of 2.5 L min<sup>-1</sup>. The heat transfer area is 2150 cm<sup>2</sup> and the heat transfer coefficient is 73 cal cm<sup>-2</sup> h<sup>-1</sup> K<sup>-1</sup>. At the time the acid is charged to the reactor, the cooling water temperature within the heat exchanger is 20 °C. The density and heat capacity of the acid solution, base solution, and cooling water can all be taken to be those of water, 1 g cm<sup>-3</sup> and 1 cal g<sup>-1</sup> K<sup>-1</sup>. The neutralization reaction, equation (1), is irreversible with a heat of reaction equal to -13.7 kcal mol<sup>-1</sup>. The reaction is first order in both acid and base with a pre-exponential factor of 8.11 x 10<sup>12</sup> L mol<sup>-1</sup> s<sup>-1</sup> and an activation energy of 17.7 kcal mol<sup>-1</sup>. equation (2). The pressure in the reactor will be constant and equal to 1 atm. Plot the acid concentration and the reactor temperature as functions of time while the base is being added.</p>
<p><span class="math display">\[
A + B \rightarrow S + W \tag{1}
\]</span></p>
<p><span class="math display">\[
r_1 = k_1C_AC_B \tag{2}
\]</span></p>
<hr>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The assignment describes an SBSTR and its operation. There isn’t any other equipment in the system, so this is an isolated ideal reactor modeling assignment. When I summarize the information in the assignment narrative I will use appropriate variable symbols for each quantity. I will use a subscripted “0” to denote values at the start of the process, a subsctipted “f” to denote values at the end of the process, and a subscripted “in” to denote values entering the reactor or jacket. I will assume that the cooling water in the jacket is at 20 °C before the process begins.</p>
<p>The quantities of interest are concentration and temperature during the first stage of the operating protocol, so only that stage needs to be analyzed.</p>
</div>
</div>
</div>
<section id="assignment-summary" class="level4" data-number="10.5.1.1">
<h4 data-number="10.5.1.1" class="anchored" data-anchor-id="assignment-summary"><span class="header-section-number">10.5.1.1</span> Assignment Summary</h4>
<p><strong>Given and Known Constants</strong>: <span class="math inline">\(C_{A,0}\)</span> = 15 M, <span class="math inline">\(T_0\)</span> = = 20 °C, <span class="math inline">\(C_{15,in}\)</span> = 2 M, <span class="math inline">\(T_{in}\)</span> = 20 °C, <span class="math inline">\(V_0\)</span> = 5 L, <span class="math inline">\(\dot{V}_{in}\)</span> = 0.25 L min<sup>-1</sup>, <span class="math inline">\(V_B\)</span> = 5 L, <span class="math inline">\(V_{ex}\)</span> = 2.5 L, <span class="math inline">\(T_{ex,in}\)</span> = 20 °C, <span class="math inline">\(\dot{V}_{ex}\)</span> = 2.5 L min<sup>-1</sup>, <span class="math inline">\(A\)</span> = 2150 cm<sup>2</sup>, <span class="math inline">\(U\)</span> = 73 cal cm<sup>-2</sup> h<sup>-1</sup> K<sup>-1</sup>, <span class="math inline">\(T_{ex,0}\)</span> = 20 °C, <span class="math inline">\(\rho\)</span> = 1 g cm<sup>-3</sup>, <span class="math inline">\(\tilde{C}_p\)</span> = 1 cal g<sup>-1</sup> K<sup>-1</sup>, <span class="math inline">\(\Delta H_1\)</span> = -13.7 kcal mol<sup>-1</sup>, <span class="math inline">\(k_{0,1}\)</span> = 8.11 x 10<sup>12</sup> L mol<sup>-1</sup> s<sup>-1</sup>, <span class="math inline">\(E_1\)</span> = 17.7 kcal mol<sup>-1</sup>, <span class="math inline">\(P\)</span> = 1 atm, <span class="math inline">\(M_B\)</span> = 40 g mol<sup>-1</sup>, and <span class="math inline">\(R\)</span> = 1.987 cal mol<sup>-1</sup> K<sup>-1</sup> = 0.08206 L atm mol<sup>-1</sup> K<sup>-1</sup>.</p>
<p><strong>Reactor System</strong>: cooled SBSTR with a one-stage operational protocol.</p>
<p><strong>Quantities of Interest</strong>: <span class="math inline">\(C_A\left(t\right)\)</span> and <span class="math inline">\(T\left(t\right)\)</span> as graphs.</p>
</section>
<section id="mathematical-formulation-of-the-solution" class="level4" data-number="10.5.1.2">
<h4 data-number="10.5.1.2" class="anchored" data-anchor-id="mathematical-formulation-of-the-solution"><span class="header-section-number">10.5.1.2</span> Mathematical Formulation of the Solution</h4>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Reactor design equations are needed to model a reactor, and mole balances must always be included among the design equations. I will simply write an SBSTR mole balance, <a href="section_3_react_eng_models.html#eq-sbstr_mol_balance" class="quarto-xref">Equation&nbsp;<span>6.19</span></a>, for each of the reagents, A, B, S, and W. Only one reaction is taking place, so the summation reduces to a single term, and only reagent B flows into the reactor, so <span class="math inline">\(\dot n_{A,in}\)</span> = <span class="math inline">\(\dot n_{S,in}\)</span> = <span class="math inline">\(\dot n_{W,in}\)</span> = 0.</p>
<p><span class="math display">\[
\frac{dn_i}{dt} = \dot n_{i,in} + V \sum_j \nu_{i,j}r_j \Rightarrow \dot n_{i,in} + \nu_{i,1} V r_1
\]</span></p>
<p>The reactor is not isothermal, so an energy balance on the reaction fluid, <a href="section_3_react_eng_models.html#eq-sbstr_energy_balance" class="quarto-xref">Equation&nbsp;<span>6.20</span></a>, must also be included among the reactor design equations. The assignment narrative provides the gravimetric heat capacity of the reacting fluid, so that can be used in the first term in place of the summation over the molar heat capacities. The reacting fluid is an ideal liquid, so the pressure is constant and its time deriviative is equal to zero. Liquid is being added to the reactor, so the reacting fluid volume is not constant and its derivative is not equal to zero. There are no shafts or moving boundaries (other than, perhaps, an agitator), so the rate of doing work is zero. The term for the sensible heat gained by the B that is fed to the reactor is expressed in terms of its molar flow rate and heat capacity. This term can be re-written in terms of the mass flow rate and heat capacity, and noting that the heat capacity is constant, it can be taken outside of the integral which then can be evaluated. Finally, there is only one reaction taking place so the final sum reduces to a single term.</p>
<p><span class="math display">\[
\begin{aligned}
\cancelto{\rho V \tilde{C}_p}{\sum_i \left( n_i \hat C_{p,i}\right)}  \frac{dT}{dt} &amp;- \cancelto{0}{V\frac{dP}{dt}} - P\frac{dV}{dt} = \dot Q - \cancelto{0}{\dot W} \\&amp;- \cancelto{\dot{m}_{B,in}\tilde{C}_p \left(T - T_{in}\right)}{\sum_i \dot n_{i,in} \int_{T_{in}}^T \hat C_{p,i}dT}  - \cancelto{Vr_1 \Delta H_1}{V\sum_j r_j \Delta H_j}
\end{aligned}
\]</span></p>
<p><span class="math display">\[
\rho V \tilde{C}_p \frac{dT}{dt} - P\frac{dV}{dt} = \dot Q - \dot{m}_{B,in} \tilde{C}_p\left(T - T_{in}\right)  - V r_1 \Delta H_1
\]</span></p>
<p>The reactor is cooled using a heat exchange fluid that gains sensible heat, so an energy balance on that exchange fluid, <a href="section_3_react_eng_models.html#eq-exchange_energy_bal_sensible" class="quarto-xref">Equation&nbsp;<span>6.2</span></a> is also needed. Again, because the heat capacity is constant it can be taken outside of the integral, and the integral can be evaluated. The equation can then be written in the form of a derivative expression.</p>
<p><span class="math display">\[
\rho_{ex} V_{ex} \tilde C_{p,ex}\frac{dT_{ex}}{dt} = -\dot Q - \dot m_{ex} \int_{T_{ex,in}}^{T_{ex}} \tilde C_{p,ex}dT = -\dot Q - \dot m_{ex} \tilde C_{p,ex} \left( T_{ex} - T_{ex,in} \right)
\]</span></p>
<p><span class="math display">\[
\frac{dT_{ex}}{dt} = \frac{-\dot Q - \dot m_{ex} \tilde C_{p,ex} \left( T_{ex} - T_{ex,in} \right)}{\rho_{ex} V_{ex} \tilde C_{p,ex}}
\]</span></p>
</div>
</div>
</div>
<p><strong>Reactor Design Equations</strong></p>
<p>Mole balance design equations for A, B, S and W are presented in equations (3) - (6). The energy balance on the reacting fluid is given in equation (7), and an energy balance on the heat exchange fluid is shown in equation (8).</p>
<p><span class="math display">\[
\frac{dn_A}{dt} = - V r_1 \tag{3}
\]</span></p>
<p><span class="math display">\[
\frac{dn_B}{dt} = \dot n_{B,in} - V r_1 \tag{4}
\]</span></p>
<p><span class="math display">\[
\frac{dn_S}{dt} =  V r_1 \tag{5}
\]</span></p>
<p><span class="math display">\[
\frac{dn_W}{dt} =  V r_1 \tag{6}
\]</span></p>
<p><span class="math display">\[
\rho V \tilde{C}_p \frac{dT}{dt} - P\frac{dV}{dt} = \dot Q - \dot{m}_{B,in} \tilde{C}_p\left(T - T_{in}\right)  - V r_1 \Delta H_1 \tag{7}
\]</span></p>
<p><span class="math display">\[
\frac{dT_{ex}}{dt} = \frac{-\dot Q - \dot m_{ex} \tilde C_p \left( T_{ex} - T_{ex,in} \right)}{\rho V_{ex} \tilde C_p} \tag{8}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The reactor design equations are IVODEs. There are six equations, and they include seven dependent variables, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, <span class="math inline">\(V\)</span>, and <span class="math inline">\(T_{ex}\)</span>. I need to add an IVODE or eliminate a dependent variable. This is a liquid-phase system with liquid being added. Assuming the liquid to be an incompressible ideal solution, the rate of change of the volume will equal the volumetric flow rate, yielding a seventh IVODE. I can either add that equation to the design equations or I can use it to eliminate <span class="math inline">\(V\)</span> as a dependent variable.</p>
<p>When I solve the IVODEs I will need to have them in the form of derivative expressions (see <a href="apndx_mathematics.html#sec-apndx_solve_ivodes" class="quarto-xref"><span>Section F.5.2</span></a>). Equations (3) through (7) and equation (9) are in that form, but equation (8) is not. However, if I substitute equation (9) for $ in equation (8), I will have six IVODEs with six dependent variables.</p>
</div>
</div>
</div>
<p>The liquids are ideal and incompressible, so the change in the reacting fluid volume is simply equal to the volumetric flow rate, equation (9). Substitution of equation (9) for <span class="math inline">\(\frac{dV}{dt}\)</span> in equation (7) and rearrangement converts it to the form of a derivative expression, equation (10), and results in a set of six reactor design equations (3) - (6), (8), and (10), with six dependent variables, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>.</p>
<p><span class="math display">\[
\frac{dV}{dt} = \dot{V}_{in}\tag{9}
\]</span></p>
<p><span class="math display">\[
\frac{dT}{dt} = \frac{\dot Q - \dot{m}_{B,in} \tilde{C}_p\left(T - T_{in}\right)  - V r_1 \Delta H_1 + P\dot{V}_{in}}{\rho V \tilde{C}_p} \tag{10}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The reactor design equations are IVODEs. The independent variable is the elapsed time, <span class="math inline">\(t\)</span>. I can define <span class="math inline">\(t=0\)</span> as the instant the flow of B into the reactor begins. The initial values are then simply the values of the dependent variables at that time. At that instant, only reagent A is present in the system, so the initial values of the molar amounts of B, S, and W are zero.</p>
<p>The quantities of interest are the concentration of A and the temperature during the period when B is being added to the reactor. When 20 L of the base solution have been added, the feed must stop. Unfortunately, I can’t use the volume of base solution as the stopping criterion because it isn’t one of the independent or dependent variables. Instead, I’ll just use the final time, <span class="math inline">\(t_f\)</span>, as the stopping criterion.</p>
</div>
</div>
</div>
<p><strong>Initial Values and Stopping Criterion</strong></p>
<div id="tbl-example_10_5_1_initial_values" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example_10_5_1_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.1: Initial values and stopping criterion for solving equations, (3) - (6), (8), and (10).
</figcaption>
<div aria-describedby="tbl-example_10_5_1_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: center;">Initial Value</th>
<th style="text-align: center;">Stopping Criterion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(t\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"><span class="math inline">\(t_f\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_A\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{A,0}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(n_B\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_S\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(n_W\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(T\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(T_{ex}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_{ex,0}\)</span></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>In order to solve the IVODEs numerically I’ll need to do two things: calculate the values of the derivatives at the start of each integration step and calculate all of the initial and final values in <a href="#tbl-example_10_5_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.1</span></a>.</p>
<p>First I’ll write the ancillary equations I need to evaluate the derivatives at the start of each integration step. At that point, the independent and dependent variables (<span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>) will be known along with the given and known constants. I will need to calculate any other quantities that appear in the derivatives expressions. Examining equations (3) - (6), (8), and (10), I see that the unknown quantities <span class="math inline">\(V\)</span>, <span class="math inline">\(r_1\)</span>, <span class="math inline">\(\dot{n}_{B,in}\)</span>, <span class="math inline">\(\dot{m}_{B,in}\)</span>, and <span class="math inline">\(\dot{Q}\)</span> are present in the IVODEs and need to be calculated.</p>
<p><span class="math inline">\(V\)</span> is the instantaneous volume of the reacting fluid, not the total capacity of the reactor. Noting that the inlet flow rate is constant, equation (9) can be integrated to get an expression for the instantaneous volume during the time that fluid is flowing into the reactor.</p>
<p><span class="math display">\[
\frac{dV}{dt} = \dot{V}_{in} \qquad \Rightarrow \qquad \int_{V_0}^V dV = \dot{V}_{in} \int_{0}^t dt
\]</span></p>
<p><span class="math display">\[
V = \dot{V}_{in} t + V_0
\]</span></p>
<p>The rate is given by equation (2), but that introduces the rate coefficient and the concentrations of A and B. These can be calculated using the Arrhenius expression, <a href="section_2_rates_and_expressions.html#eq-arrhenius" class="quarto-xref">Equation&nbsp;<span>4.8</span></a>, and the defining equation for concentration, <a href="section_1_rxns_reactors.html#eq-concentration_closed" class="quarto-xref">Equation&nbsp;<span>2.7</span></a>. Similarly, the inlet molar flow rate can be calculated from the known inlet volumetric flow rate and concentration using <a href="section_1_rxns_reactors.html#eq-concentration_open" class="quarto-xref">Equation&nbsp;<span>2.15</span></a>. The base is NaOH, so the mass flow rate can be calculated from the molar flow rate and the molecular weight. Finally the rate of heat exchange can be calculated using the known heat transfer coefficient and area.</p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Evaluating the Derivatives</strong></p>
<p>Assuming the reacting fluid to be an ideal liquid and noting that the inlet volumetric flow rate is constant, the instantaneous reacting fluid volume is given by equation (11). The rate, <span class="math inline">\(r_1\)</span>, appearing in the design equations can be calculated using the rate expression, equation (2). The rate coefficient and concentrations that appear in the rate expression can be calculated using equations (12), (13), and (14). Equation (15) gives the inlet molar flow rate of reagent B, and noting that reagent B is NaOH, its mass flow rate can be calculated using equation (16). Finally the rate of heat transfer is related to the heat transfer coefficient and heat transfer area, equation (17).</p>
<p><span class="math display">\[
V = \dot{V}_{in} t + V_0 \tag{11}
\]</span></p>
<p><span class="math display">\[
k_1 = k_{0,1}\exp{\left(\frac{-E_1}{RT}\right)} \tag{12}
\]</span></p>
<p><span class="math display">\[
C_A = \frac{n_A}{V} \tag{13}
\]</span></p>
<p><span class="math display">\[
C_B = \frac{n_B}{V} \tag{14}
\]</span></p>
<p><span class="math display">\[
\dot{n}_{B,in} = \dot{V}_{in} C_{B,in} \tag{15}
\]</span></p>
<p><span class="math display">\[
\dot{m}_{B,in} = \dot{n}_{B,in}M_{NaOH} \tag{16}
\]</span></p>
<p><span class="math display">\[
\dot{Q} = UA\left(T - T_{ex} \right) \tag{17}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When I solve the IVODEs numerically, I’ll also need to know the initial and final values in <a href="#tbl-example_10_5_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.1</span></a>. I defined <span class="math inline">\(t_0\)</span> to equal 0. The initial moles of B, S, and W are zero, and <span class="math inline">\(T_0\)</span>, <span class="math inline">\(T_{ex,0}\)</span>, and <span class="math inline">\(V\)</span> are known. The initial molar amount of A can be calculated from the known initial reacting fluid volume and the initial concentration of A. The final time can be calculated from the knowledge that 5 L of base will be added at a constant rate of 0.25 L min<sup>-1</sup>.</p>
<p><span class="math display">\[
t_f = \frac{V_B}{\dot{V}_{in}}
\]</span></p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Calculating the Initial and Final Values</strong></p>
<p><span class="math display">\[
n_{A,0} = C_{A,0}V_0 \tag{18}
\]</span></p>
<p><span class="math display">\[
t_f = \frac{V_B}{\dot{V}_{in}} \tag{19}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>At this point the reactor design equations can be solved. Since they are IVODEs, doing so will yield corresponding sets of corresponding values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span> spanning the range from their initial values to the point where the reactor becomes full. I can generate the requested graph showing <span class="math inline">\(T\)</span> <em>vs</em>. <span class="math inline">\(t\)</span> directly. Before I can generate the other requested graph, I need to calculate corresponsing values of <span class="math inline">\(C_A\)</span>. I can use the definition of concentration for this purpose.</p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Calculating the Quantities of Interest</strong></p>
<p>Solving the reactor design equations yields sets of corresponding values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span> spanning the range from their initial values to the point where the reactor becomes full. Corresponding values of <span class="math inline">\(C_A\)</span> can be calculated by using eqation (11) to calculate coresponding reacting fluid volumes and then using equation (13) to calculate corresponding concentrations of A.</p>
<p><strong>Calculations Summary</strong></p>
<ol type="1">
<li>Substitute given and known constants into all equations.</li>
<li>When it is necessary to evaluate the derivatives
<ol type="a">
<li><span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span> will be available.</li>
<li>calculate <span class="math inline">\(V\)</span>, <span class="math inline">\(k_1\)</span>, <span class="math inline">\(\dot{n}_{B,in}\)</span>, <span class="math inline">\(\dot{m}_{B,in}\)</span>, and <span class="math inline">\(\dot{Q}\)</span> using equations (11), (12), and (15) - (17).</li>
<li>calculate <span class="math inline">\(C_A\)</span>, and <span class="math inline">\(C_B\)</span> using equations (13) and (14).</li>
<li>calculate <span class="math inline">\(r_1\)</span> using equation (2).</li>
<li>evaluate the derivatives using equations (3) - (6), (8) and (10).</li>
</ol></li>
<li>When it is necessary to calculate the initial and final values in <a href="#tbl-example_10_5_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.1</span></a>
<ol type="a">
<li><span class="math inline">\(t_0\)</span>, <span class="math inline">\(T_0\)</span>, <span class="math inline">\(T_{ex,0}\)</span>, <span class="math inline">\(V_0\)</span>, and <span class="math inline">\(V\)</span> are known constants.</li>
<li>calculate <span class="math inline">\(n_{A,0}\)</span> and <span class="math inline">\(t_f\)</span> using equations (18) and (19).</li>
</ol></li>
<li>When it is necessary to calculate the quantity of interest, <span class="math inline">\(C_A\)</span>
<ol type="a">
<li>corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, <span class="math inline">\(T_{ex}\)</span>, and <span class="math inline">\(V\)</span>, spanning the range from their initial values to their final values will be available.</li>
<li>calculate corresponding values of <span class="math inline">\(V\)</span> using equation (11)</li>
<li>calculate corresponding values of <span class="math inline">\(C_A\)</span> using equation (13).</li>
<li>plot <span class="math inline">\(T\)</span> <em>vs</em>. <span class="math inline">\(t\)</span> and <span class="math inline">\(C_A\)</span> <em>vs</em>. <span class="math inline">\(t\)</span>.</li>
</ol></li>
</ol>
</section>
<section id="numerical-implementation-of-the-solution" class="level4" data-number="10.5.1.3">
<h4 data-number="10.5.1.3" class="anchored" data-anchor-id="numerical-implementation-of-the-solution"><span class="header-section-number">10.5.1.3</span> Numerical implementation of the Solution</h4>
<ol type="1">
<li>Make the given and known constants available for use in all functions.</li>
<li>Write a derivatives function that
<ol type="a">
<li>receives the independent and dependent variables, <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span> as arguments,</li>
<li>evaluates the derivatives as described in step 2 of the calculations summary, and</li>
<li>returns the values of the derivatives.</li>
</ol></li>
<li>Write a reactor model function that
<ol type="a">
<li>calculates the initial and final values in <a href="#tbl-example_10_5_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.1</span></a> as described in step 3 of the calculations summary,</li>
<li>gets corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, <span class="math inline">\(T_{ex}\)</span>, and <span class="math inline">\(V\)</span>, spanning the range from their initial values to their final values by calling an IVODE solver and passing the following information to it
<ol type="i">
<li>the initial values and stopping criterion in <a href="#tbl-example_10_5_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.1</span></a> and</li>
<li>the name of the derivatives function from step 2 above,</li>
</ol></li>
<li>checks that the solver successfully solved the IVODEs, and</li>
<li>returns the values returned by the IVODE solver.</li>
</ol></li>
<li>Perform the analysis by
<ol type="a">
<li>calling the reactor model function (step 3 above) to get corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_S\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(T\)</span>, <span class="math inline">\(T_{ex}\)</span>, and <span class="math inline">\(V\)</span>, spanning the range from their initial values to their final values and</li>
<li>calculating and plotting the quantities of interest as described in step 4 of the calculations summary.</li>
</ol></li>
</ol>
</section>
<section id="results-and-discussion" class="level4" data-number="10.5.1.4">
<h4 data-number="10.5.1.4" class="anchored" data-anchor-id="results-and-discussion"><span class="header-section-number">10.5.1.4</span> Results and Discussion</h4>
<p>The calculations were performed as described above. The concentration of acid during the time when base is being added to the reactor is shown in <a href="#fig-example_10_5_1_concentration_profile" class="quarto-xref">Figure&nbsp;<span>10.2</span></a> and the temperature during that time is shown in <a href="#fig-example_10_5_1_temperature_profile" class="quarto-xref">Figure&nbsp;<span>10.3</span></a></p>
<div id="fig-example_10_5_1_concentration_profile" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-example_10_5_1_concentration_profile-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="examples/reb_10_5_1/concentration_profile.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-example_10_5_1_concentration_profile-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.2: Concentration of acid during the additon of base.
</figcaption>
</figure>
</div>
<div id="fig-example_10_5_1_temperature_profile" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-example_10_5_1_temperature_profile-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="examples/reb_10_5_1/temperature_profile.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-example_10_5_1_temperature_profile-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.3: Reacting fluid temperature during the additon of base.
</figcaption>
</figure>
</div>
<p>The assignment narrative noted that if the concentrated acid and base were mixed instantaneously, as would be done in a BSTR, they would react violently and release sufficient heat to raise the temperature to 225 °C. The heat exchanger would not be able to remove that heat rapicly enough to keep the temperature under control. <a href="#fig-example_10_5_1_temperature_profile" class="quarto-xref">Figure&nbsp;<span>10.3</span></a> shows that by operating as an SBSTR and adding the base slowly over time, the temperature can be safely controlled.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>An external heat exchanger like that depeicted in <a href="section_4_bstr_analysis.html#fig-bstr_heat_exchange_schematics" class="quarto-xref">Figure&nbsp;<span>9.1</span></a> (c) is used to cool the reactor. If the reactor had a jacket through which the cooling water circulated, the heat transfer area might change as the base was added. Initially the reactor would be approximately half full. If the jacket was the full height of the reactor, that would mean that the reacting fluid was only contacting half of the heat transfer area at the start of the reaction. This would reduce the rate of heat removal by half at the start of the process, leading to a larger temperature increase. As the reactor filled, the reactor would contact a larger and larger fraction of the heat transfer area. Only when the reactor became full, would the reacting fluid contact the entire heat transfer area.</p>
</div>
</div>
</div>
</section>
</section>
<section id="sec-example_10_2" class="level3" data-number="10.5.2">
<h3 data-number="10.5.2" class="anchored" data-anchor-id="sec-example_10_2"><span class="header-section-number">10.5.2</span> Yield in an SBSTR</h3>
<p>The rate expressions for reactions (1) and (2) are shown in equations (3) and (4). The Arrhenuis parameters for these reactions are <span class="math inline">\(k_{0,1}\)</span> = 1.83 x 10<sup>12</sup> L mol<sup>-1</sup> h<sup>-1</sup>, <span class="math inline">\(E_1\)</span> = 18.0 kcal mol<sup>-1</sup>, <span class="math inline">\(k_{0,2}\)</span> = 5.08 x 10<sup>13</sup> L mol<sup>-1</sup> h<sup>-1</sup>, and <span class="math inline">\(E_2\)</span> = 20.5 kcal mol<sup>-1</sup>, Reagent D is the desired product while reagent U is undesired. The heats of reactions (1) and (2) are -9000 and -7800 cal mol<sup>-1</sup>, respectively. Solutions of A and B have a heat capacity of 863 cal L<sup>-1</sup> K<sup>-1</sup>. A 2 M solution of A and a 0.5 M solution of B, both at 40 °C, are going to be used to produce D in an adiabatic semi-batch reactor operating at 1 atm. The reactor will be charged with 2000 L of the A solution, and 8000 L of the B solution will be added at a constant rate over a period of time. If the total reaction time is always 8 h, compare the overall conversion of B, the selectivity for D over U (final moles of D per final moles of U), and the yield of D from B (final moles of D per total moles of B added to the reactor) if the solution of B is added over the first 1, 3, 5, or 7 hours of operation.</p>
<p><span class="math display">\[
A + B \rightarrow D \tag{1}
\]</span></p>
<p><span class="math display">\[
2 B \rightarrow U \tag{2}
\]</span></p>
<p><span class="math display">\[
r_1 = k_1C_AC_B \tag{3}
\]</span></p>
<p><span class="math display">\[
r_2 = k_2C_B^2 \tag{4}
\]</span></p>
<hr>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This assignment involves the analysis of an isolated SBSTR. I will begin by summarizing the information provided in the assignment narrative. I’ll use variable symbols that are appropriate for each given quantity. I’ll use subsctipted “0” to denote initial values, subscripted “f” to denote final values and subscripted “in” to denote inlet values. I’ll denote the elapsed time when the flow stops as <span class="math inline">\(t_{add}\)</span>.</p>
<p>The operational protocol has two stages: semi-batch while reagent B is being added and batch after the feed stops.</p>
</div>
</div>
</div>
<section id="assignment-summary-1" class="level4" data-number="10.5.2.1">
<h4 data-number="10.5.2.1" class="anchored" data-anchor-id="assignment-summary-1"><span class="header-section-number">10.5.2.1</span> Assignment Summary</h4>
<p><strong>Given and Known Constants</strong>: <span class="math inline">\(k_{0,1}\)</span> = 1.83 x 10<sup>12</sup> L mol<sup>-1</sup> h<sup>-1</sup>, <span class="math inline">\(E_1\)</span> = 18.0 kcal mol<sup>-1</sup>, <span class="math inline">\(k_{0,2}\)</span> = 5.08 x 10<sup>13</sup> L mol<sup>-1</sup> h<sup>-1</sup>, <span class="math inline">\(E_2\)</span> = 20.5 kcal mol<sup>-1</sup>, <span class="math inline">\(\Delta H_1\)</span> = -9000 cal mol<sup>-1</sup>, <span class="math inline">\(\Delta H_2\)</span> = -7800 cal mol<sup>-1</sup>, <span class="math inline">\(\breve{C}_p\)</span> = 863 cal L<sup>-1</sup> K<sup>-1</sup>, <span class="math inline">\(C_{A,0}\)</span> = 2 M, <span class="math inline">\(C_{B,in}\)</span> = 0.5 M, <span class="math inline">\(T_0\)</span> = <span class="math inline">\(T_{in}\)</span> = 40 °C, <span class="math inline">\(P\)</span> = 1 atm, <span class="math inline">\(V_0\)</span> = 2000 L, <span class="math inline">\(V_B\)</span> = 8000 L, <span class="math inline">\(t_f\)</span> = 8 h, <span class="math inline">\(t_{add}\)</span> = 1, 3, 5, or 7 h, and <span class="math inline">\(R\)</span> = 1.987 cal mol<sup>-1</sup> K<sup>-1</sup> = 0.08206 L atm mol<sup>-1</sup> K<sup>-1</sup>..</p>
<p><strong>Reactor System</strong>: Adiabatic SBSTR with a one-stage operating protocol or Adiabatic SBSTR in the first stage of operation and adiabatic BSTR in the second stage.</p>
<p><strong>Quantities of Interest</strong>: <span class="math inline">\(f_B\)</span>, <span class="math inline">\(S_{D/U}\)</span>, and <span class="math inline">\(Y_{D/B}\)</span></p>
</section>
<section id="mathematical-formulation-of-the-solution-1" class="level4" data-number="10.5.2.2">
<h4 data-number="10.5.2.2" class="anchored" data-anchor-id="mathematical-formulation-of-the-solution-1"><span class="header-section-number">10.5.2.2</span> Mathematical Formulation of the Solution</h4>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>I need to generate the reactor design equations for modeling this system. Mole balances are always included in the design equations. I’ll write a mole banance for each of the four reagents. The general SBSTR mole balance is given in <a href="section_3_react_eng_models.html#eq-sbstr_mol_balance" class="quarto-xref">Equation&nbsp;<span>6.19</span></a>. Two reactions take place in this system, so the summation expands to two terms. The inlet molar flow rates of A, D, and U are all equal to zero. The only difference when there is a second phase of operation is that the inlet molar flow rate of reagent B is also equal to zero.</p>
<p><span class="math display">\[
\frac{dn_i}{dt} = \dot n_{i,in} + V \sum_j \nu_{i,j}r_j \Rightarrow \dot n_{i,in} + \nu_{i,1} V r_1 + \nu_{i,2} V r_2
\]</span></p>
<p>The reactor is not isothermal, so the mole balances cannot be solved independently of an energy balance. The general energy balance for an SBSTR is given in <a href="section_3_react_eng_models.html#eq-sbstr_energy_balance" class="quarto-xref">Equation&nbsp;<span>6.20</span></a>. The narrative provides a volumetric heat capacity that applies to solutions of A and B. Presumably this heat capacity is essentially equal to that of the solvent, so it can be used for both the reacting fluid and the feed stream, replacing the summations over molar heat capacities. The heat capacity is constant, so it can be taken outside of the integral, and the resulting trivial integral can be evaluated. The reactor is adiabatic, so <span class="math inline">\(\dot{Q}\)</span> is equal to zero and apart from agitation, no work is being done so <span class="math inline">\(\dot{W}\)</span> is neglibible. The reacting fluid is a liquid, so the pressure is constant and its time derivative is zero. Finally, two reactions are taking place, so the final summation expands to two terms. The only differences when there is a second phase of operation is that the <span class="math inline">\(\frac{dV}{dt}\)</span> term and the inlet volumetric flow rate are equal to zero.</p>
<p><span class="math display">\[
\begin{aligned}
\cancelto{V \breve{C}_p}{\sum_i \left( n_i \hat C_{p,i}\right)}  \frac{dT}{dt} &amp;-V\cancelto{0}{\frac{dP}{dt}} - P\frac{dV}{dt} = \cancelto{0}{\dot Q} - \cancelto{0}{\dot W} \\&amp;- \cancelto{\dot{V}_{in} \breve{C}_p \left( T - T_{in} \right)}{\sum_i \dot n_{i,in} \int_{T_{in}}^T \hat C_{p,i}dT}  - V\cancelto{\left(r_1 \Delta H_1 + r_2 \Delta H_2\right)}{\sum_j r_j \Delta H_j}
\end{aligned}
\]</span></p>
<p>Being an adiabatic reactor, there isn’t an exchange fluid, so an exchange fluid energy balance is not needed.</p>
</div>
</div>
</div>
<p><strong>Reactor Design Equations</strong></p>
<p>Mole balance design equations for reagents A, B, D, and U are presented in equations (5) through (8). In the second stage of BSTR operation, the only change is that <span class="math inline">\(\dot{n}_{B,in}\)</span> is equal to zero. The energy balance on the reacting fluid is given in equation (9). In the second stage of BSTR operation, the only change is that the first term on the right side of the equals sign is becomes zero.</p>
<p><span class="math display">\[
\frac{dn_A}{dt} = -r_1V \tag{5}
\]</span></p>
<p><span class="math display">\[
\frac{dn_B}{dt} = \dot{n}_{B,in} -\left(r_1 + 2 r_2\right)V \tag{6}
\]</span></p>
<p><span class="math display">\[
\frac{dn_D}{dt} = r_1V \tag{7}
\]</span></p>
<p><span class="math display">\[
\frac{dn_U}{dt} = r_2V \tag{8}
\]</span></p>
<p><span class="math display">\[
V \breve{C}_p \frac{dT}{dt} - P\frac{dV}{dt} = -\dot{V}_{in}\breve{C}_p \left(T - T_{in} \right)  - r_1V \Delta H_1 - r_2V \Delta H_2 \tag{9}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>There are five IVODEs and six dependent variables, which means either an IVODE must be added or one of the dependent variables must be eliminated. Assuming the reacting fluid to be an ideal, incompressible solution, the instantaneous rate of change of the volume will equal the inlet volumetric flow rate. This can be used to eliminate <span class="math inline">\(\frac{dV}{dt}\)</span> from the energy balance.</p>
</div>
</div>
</div>
<p>Assuming the reacting fluid to be an ideal, incompressible solution, the instantaneous rate of change of the volume will equal the inlet volumetric flow rate, equation (10). Substitution into equation (9) and rearranging yields equation (11). Equations (5), (6), (7), (8), and (11) are a set of five IVODEs with five dependent variables, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span>.</p>
<p><span class="math display">\[
\frac{dV}{dt} = \dot{V}_{in} \tag{10}
\]</span></p>
<p><span class="math display">\[
\frac{dT}{dt} = \frac{-\dot{V}_{in}\breve{C}_p \left(T - T_{in} \right)  - r_1V \Delta H_1 - r_2V \Delta H_2 + P \dot{V}_{in}}{V \breve{C}_p} \tag{11}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The design equations are IVODEs, with two stages of operation. I can define <span class="math inline">\(t=0\)</span> to be the time when the flow of reagent B into the reactor begins. At that time only reagent A is present in the reactor. The first stage of operation ends when the flow of reagent B ends at <span class="math inline">\(t_{add}\)</span>.</p>
<p>The second stage begins immediately. Consequently the initial values are equal to the final values from the first stage. I will use a subscript “sb,f” to denote values at the end of the semi-batch stage of operation. The second stage ends after 8 h of operation.</p>
</div>
</div>
</div>
<p><strong>Initial Values and Stopping Criterion</strong></p>
<div id="tbl-example_10_5_2_stage_1_initial_values" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example_10_5_2_stage_1_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.2: Initial values and stopping criterion for solving equations, (5) - (8) and (11) for the first stage of the operating protocol.
</figcaption>
<div aria-describedby="tbl-example_10_5_2_stage_1_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: center;">Initial Value</th>
<th style="text-align: center;">Stopping Criterion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(t\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"><span class="math inline">\(t_{add}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_A\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{A,0}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(n_B\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_D\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(n_U\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(T\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_0\)</span></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div id="tbl-example_10_5_2_stage_2_initial_values" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example_10_5_2_stage_2_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.3: Initial values and stopping criterion for solving equations, (5) - (8) and (11) for the second stage of the operating protocol (i. e. if <span class="math inline">\(t_{add} &lt; t_f\)</span>).
</figcaption>
<div aria-describedby="tbl-example_10_5_2_stage_2_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: center;">Initial Value</th>
<th style="text-align: center;">Stopping Criterion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(t\)</span></td>
<td style="text-align: center;"><span class="math inline">\(t_{add}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(t_f\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_A\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{A,sb,f}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(n_B\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{B,sb,f}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_D\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{D,sb,f}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(n_U\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{U,sb,f}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(T\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_{sb,f}\)</span></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>In order to solve the IVODEs numerically I’ll need to do two things: calculate the values of the derivatives at the start of each integration step and calculate all of the initial and final values in <a href="#tbl-example_10_5_2_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.2</span></a> and <a href="#tbl-example_10_5_2_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.3</span></a>.</p>
<p>I’ll start by writing the ancillary equations that I’ll need in order to evaluate the derivatives appearing in the reactor design equations. The design equations already take the form of derivative expressions (see <a href="apndx_mathematics.html#sec-apndx_solve_ivodes" class="quarto-xref"><span>Section F.5.2</span></a>) so they do not need to be rearranged.</p>
<p>I’ll need to evaluate the derivatives at the start of each integration step. At that point, the independent and dependent variables (<span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span>) will be known along with the given and known constants. I will need to calculate any other quantities that appear in the derivatives expressions.</p>
<p>Loodking at the design equations I see that they contain the following unknown quantities: <span class="math inline">\(r_1\)</span>, <span class="math inline">\(r_2\)</span>, <span class="math inline">\(\dot{n}_{B,in}\)</span>, <span class="math inline">\(\dot{V}_{in}\)</span>, and <span class="math inline">\(V\)</span> (<span class="math inline">\(V\)</span> is the instantaneous volume of the reacting fluid, not the total capacity of the reactor). The rates can be calculated using the rate expressions provided in the assignment, but that introduces the rate coefficients and concentrations of A and B. The Arrhenius expression can be used to calculate the rate coefficients and the defining equations for concentration can be used to calculate the concentations.</p>
<p>Noting that the inlet flow rate is constant, equation (10) can be integrated to get an expression for the instantaneous volume during the time that fluid is flowing into the reactor.</p>
<p><span class="math display">\[
\frac{dV}{dt} = \dot{V}_{in} \qquad \Rightarrow \qquad \int_{V_0}^V dV = \dot{V}_{in} \int_{0}^t dt
\]</span></p>
<p>The inlet volumetric flow rate is constant, so it can be calculated by simply divining the volume of B to be added by the time over which it is added. The inlet molar flow rate of B is then just the inlet volumetric vlow rate times the concentration of B in the fluid being added.</p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Evaluating the Derivatives</strong></p>
<p>The instantaneous volumetric flow rate and reacting fluid volume appearing in the design equations can be calculated using equations (12) and (13). The rates, <span class="math inline">\(r_1\)</span> and <span class="math inline">\(r_2\)</span>, are given by equations (3) and (4). The rate coefficients in those expressions can be calculated using equations (14) and (15), and the concentrations can be calculated using equations (16) and (17). The inlet molar flow rate of B is given by equation (18).</p>
<p><span class="math display">\[
\begin{aligned}
\dot{V}_{in} &amp;= \frac{V_B}{t_{add}}; \qquad t \le t_{add}\\
\dot{V}_{in} &amp;= 0; \qquad t &gt; t_{add}
\end{aligned} \tag{12}
\]</span></p>
<p><span class="math display">\[
\begin{aligned}
V &amp;= V_0 + \dot{V}_{in}t; \qquad t \le t_{add}\\
V &amp;= V_0 + V_B; \qquad t &gt; t_{add}
\end{aligned}\tag{13}
\]</span></p>
<p><span class="math display">\[
k_1 = k_{0,1} \exp{\left( \frac{-E_1}{RT}  \right)} \tag{14}
\]</span></p>
<p><span class="math display">\[
k_2 = k_{0,2} \exp{\left( \frac{-E_2}{RT}  \right)} \tag{15}
\]</span></p>
<p><span class="math display">\[
C_A = \frac{n_A}{V} \tag{16}
\]</span></p>
<p><span class="math display">\[
C_B = \frac{n_B}{V} \tag{17}
\]</span></p>
<p><span class="math display">\[
\dot{n}_{B,in} = \dot{V}_{in} C_{B,in} \tag{18}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When I solve the IVODEs numerically, I’ll also need to know the initial and final values in <a href="#tbl-example_10_5_2_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.2</span></a> and <a href="#tbl-example_10_5_2_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.3</span></a>. The only unknown value in <a href="#tbl-example_10_5_2_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.2</span></a> is the initial molar amount of A, and that can be calculated knowing the initial volume and concentration.</p>
<p>The initial values in <a href="#tbl-example_10_5_2_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.3</span></a> will be known after the design equations have been solved for the first stage, and the final value is known.</p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Calculating the Initial and Final Values</strong></p>
<p>The initial molar amount of A can be calculated using equation (18).</p>
<p><span class="math display">\[
n_{A,0} = C_{A,0}V_0 \tag{19}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Solving the reactor design equations will yield corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span> spanning the range from <span class="math inline">\(t=0\)</span> to <span class="math inline">\(t=t_f\)</span>. The assignment asks for the final yield of D from B and the final conversion of B. The former can be calculated using its defining equation. Normally the conversion is calculated as the fraction of the initial amount of a reactant that has been converted. Here, the initial amount of B is zero, so that definition won’t work. Instead, the conversion must be calculated as the fraction of the total B added to the system that has been converted.</p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Calculating the Quantities of Interest</strong></p>
<p>Solving the reactor design equations yields <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span> spanning the range from <span class="math inline">\(t=0\)</span> to <span class="math inline">\(t=t_f\)</span>. The final amounts can be used to calculate the conversion of B, the selectivity, and the yield using equations (20), (21) and (22).</p>
<p><span class="math display">\[
f_B = \frac{V_BC_{B,in} - n_{B,f}}{V_BC_{B,in}} \tag{20}
\]</span></p>
<p><span class="math display">\[
S_{D/U} = \frac{n_{D,f}}{n_{U,f}} \tag{21}
\]</span></p>
<p><span class="math display">\[
Y_{D/B} = \frac{n_{D,f}}{V_BC_{B,in}} \tag{22}
\]</span></p>
<p><strong>Calculations Summary</strong></p>
<ol type="1">
<li>Substitute given and known constants into all equations.</li>
<li>When it is necessary to evaluate the derivatives
<ol type="a">
<li><span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span> will be available.</li>
<li>calculate <span class="math inline">\(\dot{V}_{in}\)</span>, <span class="math inline">\(V\)</span>, <span class="math inline">\(k_1\)</span>, <span class="math inline">\(k_2\)</span>, and <span class="math inline">\(\dot{n}_{B,in}\)</span> using equations (12) through (15) and (18).</li>
<li>calculate <span class="math inline">\(C_A\)</span> and <span class="math inline">\(C_B\)</span> using equations (16) and (17).</li>
<li>calcuate <span class="math inline">\(r_1\)</span> and <span class="math inline">\(r_2\)</span> using equations (3) and (4).</li>
<li>evaluate the derivatives using equations (5) through (8) and (11).</li>
</ol></li>
<li>When it is necessary to calculate the initial and final values in <a href="#tbl-example_10_5_2_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.2</span></a> and <a href="#tbl-example_10_5_2_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.3</span></a>.
<ol type="a">
<li><span class="math inline">\(T_0\)</span>, <span class="math inline">\(t_{add}\)</span>, and <span class="math inline">\(t_f\)</span> are known constants.</li>
<li>calculate <span class="math inline">\(n_{A,0}\)</span> using equation (18).</li>
<li>solve the design equations for the first phase of operation to find <span class="math inline">\(n_{A,sb,f}\)</span>, <span class="math inline">\(n_{B,sb,f}\)</span>, <span class="math inline">\(n_{D,sb,f}\)</span>, <span class="math inline">\(n_{U,sb,f}\)</span>, and <span class="math inline">\(T_{sb,f}\)</span></li>
</ol></li>
<li>When it is necessary to calculate the quantities of interest, <span class="math inline">\(f_B\)</span> and <span class="math inline">\(Y_{D/B}\)</span>
<ol type="a">
<li>corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span>, spanning the range from their initial values to their final values will be available.</li>
<li>calculate <span class="math inline">\(f_B\)</span> and <span class="math inline">\(Y_{D/B}\)</span> using equations (19) and (20).</li>
</ol></li>
</ol>
</section>
<section id="numerical-implementation-of-the-solution-1" class="level4" data-number="10.5.2.3">
<h4 data-number="10.5.2.3" class="anchored" data-anchor-id="numerical-implementation-of-the-solution-1"><span class="header-section-number">10.5.2.3</span> Numerical implementation of the Solution</h4>
<ol type="1">
<li>Make the given and known constants available for use in all functions.</li>
<li>Write a derivatives function that
<ol type="a">
<li>receives the independent and dependent variables, <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span>, as arguments,</li>
<li>evaluates the derivatives as described in step 2 of the calculations summary, and</li>
<li>returns the values of the derivatives.</li>
</ol></li>
<li>Write a reactor model function that
<ol type="a">
<li>calculates the initial and final values in <a href="#tbl-example_10_5_2_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.2</span></a> as described in step 3 of the calculations summary,</li>
<li>gets corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span>, spanning the range from their initial values to their final values for the first stage of operation by calling an IVODE solver and passing the following information to it
<ol type="i">
<li>the initial values and stopping criterion in <a href="#tbl-example_10_5_2_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.2</span></a> and</li>
<li>the name of the derivatives function from step 2 above, d, checks that the solver successfully solved the IVODEs,</li>
</ol></li>
<li>calculates the initial and final values in <a href="#tbl-example_10_5_2_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.3</span></a> as described in step 3 of the calculations summary,</li>
<li>gets corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span>, spanning the range from their initial values to their final values for the second stage of operation by calling an IVODE solver and passing the following information to it
<ol type="i">
<li>the initial values and stopping criterion in <a href="#tbl-example_10_5_2_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.3</span></a> and</li>
<li>the name of the derivatives function from step 2 above,</li>
</ol></li>
<li>checks that the solver successfully solved the IVODEs, and</li>
<li>returns the values returned by the IVODE solver.</li>
</ol></li>
<li>Perform the analysis by
<ol type="a">
<li>getting corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_B\)</span>, <span class="math inline">\(n_D\)</span>, <span class="math inline">\(n_U\)</span>, and <span class="math inline">\(T\)</span>, spanning the range from their initial values to their final values by calling the reactor model function from step 3 above,</li>
<li>calculates the quantities of interest as described in step 4 of the calculations summary.</li>
</ol></li>
</ol>
</section>
<section id="results-and-discussion-1" class="level4" data-number="10.5.2.4">
<h4 data-number="10.5.2.4" class="anchored" data-anchor-id="results-and-discussion-1"><span class="header-section-number">10.5.2.4</span> Results and Discussion</h4>
<p>The calculations were performed as described above, and the results are shown in <a href="#tbl-example_10_5_2_results" class="quarto-xref">Table&nbsp;<span>10.4</span></a>. The conversion of B decreases as its addition gets spread over longer times. This is reasonable because the later in the process that the B is added, the less time it has to react. Separate calculations show that if the reaction is run in a batch reactor the conversion is 85.7 % with a selectivity for D over U of 2.88 and a yield of D from B of 50.6 %.</p>
<div class="cell">
<div id="tbl-example_10_5_2_results" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example_10_5_2_results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.4: Effect of addition time upon the conversion of B and the yield of D from B.
</figcaption>
<div aria-describedby="tbl-example_10_5_2_results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 21%">
<col style="width: 23%">
<col style="width: 29%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">Addition Time (h)</th>
<th style="text-align: center;">Conversion of B (%)</th>
<th style="text-align: center;">Selectivity for D over U</th>
<th style="text-align: center;">Yield of D from B (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">84.4</td>
<td style="text-align: center;">3.18</td>
<td style="text-align: center;">51.5</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">80.8</td>
<td style="text-align: center;">3.77</td>
<td style="text-align: center;">52.4</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">75.5</td>
<td style="text-align: center;">4.4</td>
<td style="text-align: center;">51.7</td>
</tr>
<tr class="even">
<td style="text-align: center;">7</td>
<td style="text-align: center;">68</td>
<td style="text-align: center;">5.35</td>
<td style="text-align: center;">49.1</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Adding the B to A over time keeps the concentration of A as large as possible at all times and keeps the concentration of B lower than if it was all added at the start. The expression for the instantaneous selectivity for D over U for these reactions, <a href="#eq-inst_sel_example" class="quarto-xref">Equation&nbsp;<span>10.1</span></a> and reproduced below, suggests that this should result in greater selectivity, and indeed, <a href="#tbl-example_10_5_2_results" class="quarto-xref">Table&nbsp;<span>10.4</span></a> shows that the slower the B is added (i. e. the longer the time during which it is added), the greater the selectivity for D over U.</p>
<p><span class="math display">\[
S_{D/U,inst} = \frac{k_D}{k_U} \frac{C_A}{C_B}
\]</span></p>
<p>While the selectivity is increasing, the conversion of B is decreasing. As a consequence, the yield of D from B is nearly constant at approximately 50%, passing through a weak maximum when B is added over 3 h. The processing time in all cases is the same, 8 h. Hence, the operating costs, are basically the same. The net rate of production of D is essentially the same, too, because the yield of D is effectively constant.</p>
<p>In effect, the same amount of B is converted to D in all four cases, but as the addition time increases, the amount of B converted to U decreases while the amount of unreacted B increases. Comparing batch processing to semi-batch processing where the B is added during the first 7 h of the 8 h process, the same amount of D is produced at the same net rate. The difference is that in semi-batch mode there is more unreacted B while in batch mode there is more undesired U.</p>
<p>Semi-batch processing where the B is added during the first 7 h of the 8 h process has an advantage of batch processing in two scenarios. First, if reagent B is easily and inexpensively separable from the product mixture, not converting it to U, but instead recovering it and re-using it in a subsequent semi-batch run mitigates the low conversion.</p>
<p>The other scenario is when U is a valueless hazardous waste. The disposal of such a waste can add significantly to the cost of the process, thereby decreasing profits. In this scenario, even if the unconverted B cannot be separated and re-used, the cost of wasting reagent B (i. e. low conversion) can be more than offset by significantly lower expenses associated with disposal of U (because less U is generated).</p>
</section>
</section>
<section id="sec-example_10_3" class="level3" data-number="10.5.3">
<h3 data-number="10.5.3" class="anchored" data-anchor-id="sec-example_10_3"><span class="header-section-number">10.5.3</span> Maximizing the Net Rate in an SBSTR</h3>
<p>The hydrolysis of acetic anhydride, reaction (1), can run away thermally in a batch reactor, but this can be prevented using semi-batch operation. Suppose the rate can be described using the rate expression shown in equation (2) where the reaction is first order in acetic anhydride with a pre-exponential factor of 1.192 x 10<sup>15</sup> min<sup>-1</sup> and an activation energy of 97,600 J mol<sup>-1</sup>. The heat of reaction may be taken to be constant and equal to -58,615 J mol<sup>-1</sup>.</p>
<p>The reacting fluid is cooled by water that is fed to the perfectly mixed, 300 cm<sup>3</sup> reactor jacket at 60 °C and 250 cm<sup>3</sup> min<sup>-1</sup>. The product of the heat transfer area and the heat transfer coefficient, <span class="math inline">\(UA\)</span>, equals 260 cal min<sup>-1</sup> K<sup>-1</sup>.</p>
<p>The reactor operates at atmospheric pressure and initially contains an ideal liquid mixture of 67 cm<sup>3</sup> of water, 283 cm<sup>3</sup> of acetic acid (the solvent and product) and 0.30 cm<sup>3</sup> of sulfuric acid at 60 °C. Initially the temperature of the water in the jacket is 60 C, too. The heat capacity of the fluid in the reactor may be taken to be constant and equal to 2.68 J cm<sup>-3</sup> K<sup>-1</sup>. A total of 350 cm<sup>3</sup> of acetic anhydride at 21 °C needs to be processed. To do so, it will be fed to the reactor at a constant volumetric flow rate until all of it has been added, after which the reactor will operate in batch mode until the reacting fluid cools to 65 °C. At no time during processing can the reacting fluid temperature exceed 95 °C. What volumetric feed rate will minimize the processing time, and at that feed rate what will the final conversion of A equal? Plot (a) the temperature of the fluid in the reactor and (b) the concentration of acetic anhydride in the reactor as a function of processing time when that feed rate is used.</p>
<p>You may assume the liquid mixture to be ideal, and that the densities of acetic anhydride, acetic acid, and water are constant and equal to 1.082, 1.0, and 1.049 g cm<sup>-3</sup>, respectively. Their molecular weights are 102, 18, and 60 g mol<sup>-1</sup>, respectively, and the heat capacity of acetic anhydride being added to the reactor can be taken to be 168.2 J mol<sup>-1</sup> K<sup>-1</sup>.</p>
<p><span class="math display">\[
\left(CH_3CO\right)_2O + H_2O \rightarrow 2 CH_3CO_2H \tag{1}
\]</span></p>
<p><span class="math display">\[
r_1 = k_1C_{\left(CH_3CO\right)_2O} \tag{2}
\]</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>This problem is loosely based upon the work of Haldar and Rao <span class="citation" data-cites="haldar_experimental_1992 haldar_experimental_1992-1">(<a href="references.html#ref-haldar_experimental_1992" role="doc-biblioref">1992a</a>, <a href="references.html#ref-haldar_experimental_1992-1" role="doc-biblioref">1992b</a>)</span>, but the rate expression was modified and additional assumptions regarding fluid and reactor properties were introduced. This was done to avoid intricate details from obscuring the basic approach to the analysis of a semi-batch reactor. Therefore, the results presented here should not be used for engineering purposes, but rather the original work should be consulted.</p>
</div>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This assignment requires the analysis of an isolated reactor with a two-stage operational protocol. During the first stage it operates as an SBSTR. The first stage ends when all of the acetic anhydride has been added. During the second stage the reactor operates as a BSTR.</p>
<p>I will begin by summarizing the information provided in the assighment narrative. To simplify the notation I well let A represent acetic anhydride, W represent water, and Z represent acetic acid. With this notation, the reaction is <span class="math inline">\(A+W\rightarrow 2Z\)</span>. I will use a subscripted “0” to denote initial values, “sb” to denote values at the end of semi-batch processing (stage 1), “f” to denote final values (at the end of stage 2), and “in” to denote inlet values.</p>
</div>
</div>
</div>
<section id="assignment-summary-2" class="level4" data-number="10.5.3.1">
<h4 data-number="10.5.3.1" class="anchored" data-anchor-id="assignment-summary-2"><span class="header-section-number">10.5.3.1</span> Assignment Summary</h4>
<p><strong>Given and Known Constants</strong>: <span class="math inline">\(k_{0,1}\)</span> = 1.192 x 10<sup>15</sup> min<sup>-1</sup>, <span class="math inline">\(E_1\)</span> = 97,600 J mol<sup>-1</sup>, <span class="math inline">\(\Delta H_1\)</span> = -58,615 J mol<sup>-1</sup>, <span class="math inline">\(V_{ex}\)</span> = 300 cm<sup>3</sup>, <span class="math inline">\(T_{ex,in}\)</span> = 60 °C, <span class="math inline">\(\dot{V}_{ex,in}\)</span> = 250 cm<sup>3</sup> min<sup>-1</sup> <span class="math inline">\(UA\)</span> = 260 cal min<sup>-1</sup> K<sup>-1</sup>, <span class="math inline">\(P\)</span> = 1 atm, <span class="math inline">\(V_{W,0}\)</span> = 67 cm<sup>3</sup> <span class="math inline">\(V_{Z,0}\)</span> = 283 cm<sup>3</sup>, <span class="math inline">\(V_{H_2SO_4,0}\)</span> = 0.30 cm<sup>3</sup>, <span class="math inline">\(T_0\)</span> = 60 °C, <span class="math inline">\(T_{ex,0}\)</span> = 60 °C, <span class="math inline">\(\breve{C}_p\)</span> = 2.68 J cm<sup>-3</sup> K<sup>-1</sup>, <span class="math inline">\(V_A\)</span> = 350 cm<sup>3</sup>, <span class="math inline">\(T_{in}\)</span> = 21 °C, <span class="math inline">\(T_f\)</span> = 65 °C, <span class="math inline">\(T_{max}\)</span> = 95 °C, <span class="math inline">\(\rho_A\)</span> = 1.082 g cm<sup>-3</sup>, <span class="math inline">\(\rho_W\)</span> = 1.0 g cm<sup>-3</sup>, <span class="math inline">\(\rho_Z\)</span> = 1.049 g cm<sup>-3</sup>, <span class="math inline">\(M_A\)</span> = 102 g mol<sup>-1</sup>, <span class="math inline">\(M_W\)</span> = 18 g mol<sup>-1</sup>, <span class="math inline">\(M_Z\)</span> = 60 g mol<sup>-1</sup>, <span class="math inline">\(\hat{C}_{p,A}\)</span> = 168.2 J mol<sup>-1</sup> K<sup>-1</sup>, <span class="math inline">\(\rho_{ex}\)</span> = 1.0 g cm<sup>-3</sup>, and <span class="math inline">\(\tilde{C}_{p,ex}\)</span> = 1 cal g<sup>-1</sup> K<sup>-1</sup>.</p>
<p><strong>Reactor System</strong>: Cooled stirred tank with a 2-stage operating protocol where the reactor is an SBSTR during the first stage and a BSTR during the second stage.</p>
<p><strong>Quantities of Interest</strong>: <span class="math inline">\(\dot{V}_{opt} = \underset{\dot{V}_{in}}{\arg\min}\left( t_f \right)\)</span>, <span class="math inline">\(T\left(t\right)\big\vert_{\dot{V}_{in} = \dot{V}_{opt}}\)</span> (as a graph), and <span class="math inline">\(C_A\left(t\right)\big\vert_{\dot{V}_{in} = \dot{V}_{opt}}\)</span> (as a graph).</p>
</section>
<section id="mathematical-formulation-of-the-solution-2" class="level4" data-number="10.5.3.2">
<h4 data-number="10.5.3.2" class="anchored" data-anchor-id="mathematical-formulation-of-the-solution-2"><span class="header-section-number">10.5.3.2</span> Mathematical Formulation of the Solution</h4>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This assignment requires the modeling of an isolated SBSTR/BSTR, so I need to generate the reactor design equations for it. Mole balances are always needed when modeling a reactor. The general SBSTR mole balance is given in <a href="section_3_react_eng_models.html#eq-sbstr_mol_balance" class="quarto-xref">Equation&nbsp;<span>6.19</span></a>. Only one reaction is taking place, so the summation reduces to a single term, and only reagent A flows into the reactor, so <span class="math inline">\(\dot n_{W,in}\)</span> = <span class="math inline">\(\dot n_{Z,in}\)</span> = 0. I won’t write a mole balance for the acid since it does not react, and its molar amount is constant. The only difference in the second stage is that the flow a A into the reactor is also equal to zero.</p>
<p><span class="math display">\[
\frac{dn_i}{dt} = \dot n_{i,in} + V \sum_j \nu_{i,j}r_j \Rightarrow \dot n_{i,in} + \nu_{i,1} V r_1
\]</span></p>
<p>The reactor is not isothermal, so an energy balance on the reacting fluid, <a href="section_3_react_eng_models.html#eq-sbstr_energy_balance" class="quarto-xref">Equation&nbsp;<span>6.20</span></a>, must also be included among the reactor design equations. I am given the volumetric heat capacity of the reacting fluid, so I can replace the summation over the molar heat capacities in the first term. The reacting fluid is a liquid, so the pressure is constant and its time derivative is equal to zero. The only reagent flowing into the reactor during operation as an SBSTR is A, so the first summation on the right-hand side of the equation reduces to a single term. Additionally, the heat capacity of A is a constant so it can be taken outside of the integral and the integral can be evaluated. Finally, only one reaction is taking place, so the sum over the reactions reduces to a single term.</p>
<p><span class="math display">\[
\begin{aligned}
\cancelto{V \breve{C}_p}{\sum_i \left( n_i \hat C_{p,i}\right)}  \frac{dT}{dt} &amp;- \cancelto{0}{V\frac{dP}{dt}} - P\frac{dV}{dt} = \dot Q - \cancelto{0}{\dot W} \\&amp;- \cancelto{\dot{n}_{A,in}\hat{C}_{p,A} \left(T - T_{in}\right)}{\sum_i \dot n_{i,in} \int_{T_{in}}^T \hat C_{p,i}dT}  - V\cancelto{r_1 \Delta H_1}{\sum_j r_j \Delta H_j}
\end{aligned}
\]</span></p>
<p><span class="math display">\[
V \breve{C}_p \frac{dT}{dt} - P\frac{dV}{dt} = \dot Q - \dot{n}_{A,in} \hat{C}_{p,A}\left(T - T_{in}\right)  - V r_1 \Delta H_1
\]</span></p>
<p>The reactor is cooled using water that gains sensible heat, so an energy balance on the exchange fluid, <a href="section_3_react_eng_models.html#eq-exchange_energy_bal_sensible" class="quarto-xref">Equation&nbsp;<span>6.2</span></a>, is also needed. Again, because the heat capacity is constant it can be taken outside of the integral and the integral can be evaluated. Dividing both sides of this equation by <span class="math inline">\(\rho_{ex} V_{ex} \tilde C_{p,ex}\)</span> will convert it to the form of a derivative expression.</p>
<p><span class="math display">\[
\rho_{ex} V_{ex} \tilde C_{p,ex}\frac{dT_{ex}}{dt} = -\dot Q - \dot m_{ex} \int_{T_{ex,in}}^{T_{ex}} \tilde C_{p,ex}dT = -\dot Q - \dot m_{ex} \tilde C_{p,ex} \left( T_{ex} - T_{ex,in} \right)
\]</span></p>
</div>
</div>
</div>
<p><strong>Reactor Design Equations</strong></p>
<p>Mole balance design equations for A, W, and Z are presented in equations (3), (4), and (5). The energy balance on the reacting fluid is given in equation (6). In the second stage of operation, <span class="math inline">\(\dot{n}_{A,in}\)</span> in equations (3) and (6) is equal to zero, as is the <span class="math inline">\(\frac{dV}{dt}\)</span> term. An energy balance on the heat exchange fluid is shown in equation (7).</p>
<p><span class="math display">\[
\frac{dn_A}{dt} = \dot n_{A,in} - V r_1 \tag{3}
\]</span></p>
<p><span class="math display">\[
\frac{dn_W}{dt} = - V r_1 \tag{4}
\]</span></p>
<p><span class="math display">\[
\frac{dn_Z}{dt} = V r_1 \tag{5}
\]</span></p>
<p><span class="math display">\[
V \breve{C}_p \frac{dT}{dt} - P\frac{dV}{dt} = \dot Q - \dot{n}_{A,in} \hat{C}_{p,A}\left(T - T_{in}\right)  - V r_1 \Delta H_1 \tag{6}
\]</span></p>
<p><span class="math display">\[
\frac{dT_{ex}}{dt} = \frac{-\dot Q - \dot m_{ex} \tilde C_{p,ex} \left( T_{ex} - T_{ex,in} \right)}{\rho_{ex} V_{ex} \tilde C_{p,ex}} \tag{7}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The reactor design equations are IVODEs. There are five of them, but they contain six dependent variables. Therefore, I need to either add an IVODE or eliminate a dependent variable. Assuming the reacting fluid to be an ideal, incompressible solution, the instantaneous rate of change of the volume will equal the inlet volumetric flow rate. This can be used to eliminate <span class="math inline">\(\frac{dV}{dt}\)</span> from the energy balance.</p>
</div>
</div>
</div>
<p>Assuming the reacting fluid to be an ideal, incompressible solution, the instantaneous rate of change of the volume will equal the inlet volumetric flow rate, equation (8). Substitution into equation (6) and rearranging yields equation (9). Equations (3), (4), (5), (7), and (9) are a set of five IVODEs with five dependent variables, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>. In the second stage, <span class="math inline">\(\dot{n}{A,in}\)</span> and <span class="math inline">\(\dot{V}_{in}\)</span> are equal to zero.</p>
<p><span class="math display">\[
\frac{dV}{dt} = \dot{V}_{in} \tag{8}
\]</span></p>
<p><span class="math display">\[
\frac{dT}{dt} = \frac{\dot Q - \dot{n}_{A,in} \hat{C}_{p,A}\left(T - T_{in}\right)  - V r_1 \Delta H_1 + P\dot{V}_{in}}{V \breve{C}_p} \tag{9}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The design equations are IVODEs, so initial values and a stopping criterion are needed to solve them. I can define <span class="math inline">\(t=0\)</span> to be the instant that acetic anhydride begins to flow into the reactor. The initial values are the values of the dependent variables at that time. Here, there isn’t any A present, so it’s initial value is zero. The first stage of operation ends when all of the A has been added to the reactor. I can designate that as <span class="math inline">\(t_{sb}\)</span>.</p>
<p>If the conversion of A at the end of semi-batch processing is less than 99%, there will be a second, BSTR stage. The second stage of operation begins immediately, so the initial values for the second stage are simply equal to the final values from the first stage. The second stage ends when the temperature reaches <span class="math inline">\(T_f\)</span>.</p>
</div>
</div>
</div>
<p><strong>Initial Values and Stopping Criterion</strong></p>
<div id="tbl-example_10_5_3_stage_1_initial_values" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example_10_5_3_stage_1_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.5: Initial values and stopping criterion for solving equations, (3), (4), (5), (7), and (9) for the first stage of operation.
</figcaption>
<div aria-describedby="tbl-example_10_5_3_stage_1_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: center;">Initial Value</th>
<th style="text-align: center;">Stopping Criterion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(t\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"><span class="math inline">\(t_{sb}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_A\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(n_W\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{W,0}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_Z\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{Z,0}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(T\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_0\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(T_{ex}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_{ex,0}\)</span></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p><strong>Initial Values and Stopping Criterion</strong></p>
<div id="tbl-example_10_5_3_stage_2_initial_values" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example_10_5_3_stage_2_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.6: Initial values and stopping criterion for solving equations (3), (4), (5), (7), and (9) for the second stage of operation.
</figcaption>
<div aria-describedby="tbl-example_10_5_3_stage_2_initial_values-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: center;">Initial Value</th>
<th style="text-align: center;">Stopping Criterion</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(t\)</span></td>
<td style="text-align: center;"><span class="math inline">\(t_{sb}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_A\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{A,sb}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(n_W\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{W,sb}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(n_Z\)</span></td>
<td style="text-align: center;"><span class="math inline">\(n_{Z,sb}\)</span></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(T\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_{sb}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_f\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(T_{ex}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(T_{ex,sb}\)</span></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>In order to solve the IVODEs numerically I’ll need to do two things: calculate the values of the derivatives at the start of each integration step and calculate all of the initial and final values in <a href="#tbl-example_10_5_3_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.5</span></a> and <a href="#tbl-example_10_5_3_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.6</span></a>.</p>
<p>I’ll start by writing the ancillary equations that I’ll need in order to evaluate the derivatives appearing in the reactor design equations. The design equations are in the form of differential expressions (see <a href="apndx_mathematics.html#sec-apndx_solve_ivodes" class="quarto-xref"><span>Section F.5.2</span></a>), so no manipulation is needed to put them in that form.</p>
<p>I’ll need to evaluate the derivatives at the start of each integration step. At that point, the independent and dependent variables (<span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>) will be known along with the given and known constants. I will need to calculate any other quantities that appear in the derivatives expressions. Looking at equations (3), (4), (5), (7), and (9) I see that they contain the following unknown quantities: <span class="math inline">\(\dot{n}_{A,in}\)</span>, <span class="math inline">\(V\)</span>, <span class="math inline">\(r_1\)</span>, <span class="math inline">\(\dot{Q}\)</span>, and <span class="math inline">\(\dot{m}_{ex}\)</span>.</p>
<p>In this analysis, I will be choosing values of <span class="math inline">\(\dot{V}_{in}\)</span> to see which one gives the smallest acceptable processing time. Knowing the volume of A to be added and the volumetric flow rate at which it will be added, the semi-batch processing time, <span class="math inline">\(t_{sb}\)</span>, can be calculated. Before that time, the inlet molar flow rate of A will be non-zero, and it can be calculated from its volumetric flow rate since the density and molecular weight are known. The volumetric and molar flows are equal to zero during the second stage of operation.</p>
<p><span class="math display">\[
t_{sb} = \frac{V_A}{\dot{V}_{in}}
\]</span></p>
<p><span class="math display">\[
\dot{n}_{A,in} = \frac{\dot{V}_{in} \rho_A}{M_A} \qquad \qquad t \le t_{sb}
\]</span></p>
<p>The reacting liquid is an ideal solution. During the first stage of operation, liquid is being fed to the system, so the reacting fluid volume increases over time. Equation (8) can be integrated to generate an expression for the instantaneous reacting fluid volume during the first stage of operation. During the second stage of operation, the reacting fluid volume is constant and equal to its value at the end of the first stage.</p>
<p><span class="math display">\[
\frac{dV}{dt} = \dot{V}_{in} \qquad \Rightarrow \qquad \int_{V_0}^V dV = \dot{V}_{in} \int_{0}^t dt
\]</span></p>
<p><span class="math display">\[
V = \dot{V}_{in} t + V_0 \qquad \qquad t \le t_{sb}
\]</span></p>
<p>The given rate expression, equation (2), can be used to calculate <span class="math inline">\(r_1\)</span>, but that introduces the unknowns, <span class="math inline">\(k_1\)</span> and <span class="math inline">\(C_A\)</span>. The rate coefficient can be calculated using the Arrhenius expression and the concentration of A using the definition of concentration. The rate of heat exchange can be calculated using the heat transfer area and heat transfer coefficient, and the mass flow rate of the cooling water can be calculated from its volumetric flow rate and the density of water.</p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Evaluating the Derivatives</strong></p>
<p>The volumetric flow rate of A into the reactor during the first stage of operation will be varied over a range of values to find the one that minimizes total processing time. The corresponding inlet molar flow rate can be calculated using equation (10). The instantaneous reacting fluid volume is given by equation (11). The rate can be calculated using equation (2), with the rate coefficient and concentration of A that appear in it calculated using equations (12) and (13). The rate of heat exchange is given by equation (14) and the mass flow rate of the cooling water by equation (15).</p>
<p><span class="math display">\[
\dot{n}_{A,in} = \frac{\dot{V}_{in} \rho_A}{M_A} \qquad \qquad t \le t_{sb} \tag{10}
\]</span></p>
<p><span class="math display">\[
\begin{aligned}
V &amp;= V_0 + \dot{V}_{in}t; \qquad t \le t_{sb}\\
V &amp;= V_0 + V_A; \qquad t &gt; t_{sb}
\end{aligned}\tag{11}
\]</span></p>
<p><span class="math display">\[
k_1 = k_{0,1} \exp{\left( \frac{-E_1}{RT}  \right)} \tag{12}
\]</span></p>
<p><span class="math display">\[
C_A = \frac{n_A}{V} \tag{13}
\]</span></p>
<p><span class="math display">\[
\dot{Q} = UA\left(T - T_{ex} \right) \tag{14}
\]</span></p>
<p><span class="math display">\[
\dot{m}_{ex} = \dot{V}_{ex} \rho_{ex} \tag{15}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When I solve the IVODEs numerically, I’ll also need to know the initial and final values <a href="#tbl-example_10_5_3_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.5</span></a> and <a href="#tbl-example_10_5_3_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.6</span></a>. For the first stage of operation, the initial molar amounts can be calculated from the initial volumes, densities and molecular weights. The initial temperatures are known. I will be choosing values of <span class="math inline">\(\dot{V}_{in}\)</span> to see which one gives the smallest acceptable processing time. Knowing the volume of A to be added and the volumetric flow rate at which it will be added, the semi-batch processing time, <span class="math inline">\(t_{sb}\)</span>, can be calculated. The reactor design equations then can be solved for the first stage of processing. The resulting final values then can be used as the initial values for the second stage of operation.</p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Calculating the Initial and Final Values</strong></p>
<p>The unknown initial molar amounts for the first stage of operation can be found using equations (16) and (17). The semi-batch processing time can be calculated using equation (18). The design equations for the first stage can then be solved. The resulting final values can then be used as the initial values for the second phase of operation. The final molar amount of A can be calculated using equation (19).</p>
<p><span class="math display">\[
n_{W,0} = \frac{V_{W,0}\rho_W}{M_W} \tag{16}
\]</span></p>
<p><span class="math display">\[
n_{Z,0} = \frac{V_{Z,0}\rho_Z}{M_Z} \tag{17}
\]</span></p>
<p><span class="math display">\[
t_{sb} = \frac{V_A}{\dot{V}_{in}} \tag{18}
\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click Here to See What an Expert Might be Thinking at this Point
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>At this point, I can choose a value for <span class="math inline">\(\dot{V}_{in}\)</span> and solve equations (3), (4), (5), (7), and (9) to get corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span> that span the range from their initial values to their final values. From those results I can determine the total processing time and the maximum temperature. I can repeat that process using a range of values for <span class="math inline">\(\dot{V}_{in}\)</span> to find the value of <span class="math inline">\(\dot{V}_{in}\)</span> where the reaction time is a minimum and the maximum temperature is less than 95 °C.</p>
<p>Having found the optimum volumetric flow rate, I can solve the reactor design equations using it to get corresponding values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>. The conversion can be calculated using its defining equation, and I can calculate corresponding values of <span class="math inline">\(C_A\)</span> using equations (11) and (13).</p>
</div>
</div>
</div>
<p><strong>Ancillary Equations for Calculating the Quantities of Interest</strong></p>
<p>With the information provided above, the design equations can be solved using a range of values of <span class="math inline">\(\dot{V}_{in}\)</span>. Each time, solving the reactor design equations yields sets of corresponding values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>. For that value of <span class="math inline">\(\dot{V}_{in}\)</span>, the total prcessing time is the final value of <span class="math inline">\(t\)</span>, and the maximum value of <span class="math inline">\(T\)</span> can be determined. If the maximum value of <span class="math inline">\(T\)</span> is less than 95 °C, the result satisfies the temperature constraint. After doing this for each value of <span class="math inline">\(\dot{V}_{in}\)</span> the resulting <span class="math inline">\(\dot{V}_{in}\)</span> <em>vs</em>. <span class="math inline">\(t_f\)</span> data can be plotted to indentify the <span class="math inline">\(\dot{V}_{in}\)</span> that minimizes <span class="math inline">\(t_f\)</span>,</p>
<p>The reactor design equations then can be solved using that optimum volumetric feed rate to get corresponding values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>. The conversion can be calculated using the final value of <span class="math inline">\(n_A\)</span> in equation (19) where it is based on the total A added to the reactor. Corresponding values of <span class="math inline">\(C_A\)</span> can then be calculated using equations (11) and (13).</p>
<p><span class="math display">\[
f_A = \frac{\dot{V}_{in} \rho_A - n_A}{\dot{V}_{in} \rho_A} \tag{19}
\]</span></p>
<p><strong>Calculations Summary</strong></p>
<ol type="1">
<li>Substitute given and known constants into all equations.</li>
<li>When it is necessary to evaluate the derivatives
<ol type="a">
<li><span class="math inline">\(\dot{V}_{in}\)</span>, <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span> will be available.</li>
<li>calculate <span class="math inline">\(\dot{n}_{A,in}\)</span>, <span class="math inline">\(V\)</span>, <span class="math inline">\(k_1\)</span>, <span class="math inline">\(\dot{Q}\)</span>, and <span class="math inline">\(\dot{m}_{ex}\)</span> using equations (10), (11), (12), (14), and (15).</li>
<li>calculate <span class="math inline">\(C_A\)</span> using equation (13).</li>
<li>calculate <span class="math inline">\(r_1\)</span> using equation (2).</li>
<li>evaluate the derivatives using equations (3), (4), (5), (7), and (9).</li>
</ol></li>
<li>When it is necessary to calculate the initial and final values in <a href="#tbl-example_10_5_3_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.5</span></a> and <a href="#tbl-example_10_5_3_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.6</span></a>
<ol type="a">
<li><span class="math inline">\(T_0\)</span> and <span class="math inline">\(T_{ex,0}\)</span> are known constants.</li>
<li>calculate <span class="math inline">\(n_{W,0}\)</span>, <span class="math inline">\(n_{Z,0}\)</span>, and <span class="math inline">\(t_{sb}\)</span> using equations (16) - (18).</li>
<li>solve the design equations for the first stage to get the initial values for the second stage.</li>
</ol></li>
<li>When it is necessary to calculate the quantities of interest, <span class="math inline">\(f_A\)</span> and <span class="math inline">\(C_A\)</span>
<ol type="a">
<li>corresponding sets of values of <span class="math inline">\(t\)</span>, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>, spanning the range from their initial values to their final values will be available.</li>
<li>calculate <span class="math inline">\(f_A\)</span> using equation (19)</li>
<li>calculate corresponding values of <span class="math inline">\(V\)</span> using equation (11).</li>
<li>calculate corresponding values of <span class="math inline">\(C_A\)</span> using equation (13).</li>
<li>plot <span class="math inline">\(T\)</span> <em>vs</em>. <span class="math inline">\(t\)</span> and <span class="math inline">\(C_A\)</span> <em>vs</em>. <span class="math inline">\(t\)</span>.</li>
</ol></li>
</ol>
</section>
<section id="numerical-implementation-of-the-solution-2" class="level4" data-number="10.5.3.3">
<h4 data-number="10.5.3.3" class="anchored" data-anchor-id="numerical-implementation-of-the-solution-2"><span class="header-section-number">10.5.3.3</span> Numerical implementation of the Solution</h4>
<ol type="1">
<li>Make the given and known constants available for use in all functions.</li>
<li>Define a variable to hold <span class="math inline">\(\dot{V}_{in}\)</span> and make it available to all functions.</li>
<li>Write a derivatives function that
<ol type="a">
<li>receives the independent and dependent variables, t$, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>, as arguments,</li>
<li>evaluates the derivatives as described in step 2 of the calculations summary, and</li>
<li>returns the values of the derivatives.</li>
</ol></li>
<li>Write a reactor model function that
<ol type="a">
<li>calculates the initial and final values in <a href="#tbl-example_10_5_3_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.5</span></a> as described in step 3 of the calculations summary,</li>
<li>gets corresponding sets of values of t$, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>, spanning the range from their initial values to their final values for stage 1 by calling an IVODE solver and passing the following information to it
<ol type="i">
<li>the initial values and stopping criterion in <a href="#tbl-example_10_5_3_stage_1_initial_values" class="quarto-xref">Table&nbsp;<span>10.5</span></a> and</li>
<li>the name of the derivatives function from step 3 above, d, checks that the solver successfully solved the IVODEs,</li>
</ol></li>
<li>calculates the initial and final values in <a href="#tbl-example_10_5_3_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.6</span></a> as described in step 3 of the calculations summary,</li>
<li>determines whether the conversion of A is less than 99%, and if it is
<ol type="i">
<li>gets corresponding sets of values of t$, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>, spanning the range from their initial values to their final values for stage 2 by calling an IVODE solver and passing the following information to it
<ol type="a">
<li>the initial values and stopping criterion in <a href="#tbl-example_10_5_3_stage_2_initial_values" class="quarto-xref">Table&nbsp;<span>10.6</span></a> and</li>
<li>the name of the derivatives function from step 3 above,</li>
</ol></li>
<li>checks that the solver successfully solved the IVODEs, and</li>
<li>combines the results returned by the IVODE solver with those from the first stage.</li>
</ol></li>
<li>returns the combined values returned by the IVODE solver</li>
</ol></li>
<li>Perform the analysis by
<ol type="a">
<li>choosing a value for <span class="math inline">\(\dot{V}_{in}\)</span> and making it available to all functions.</li>
<li>getting corresponding sets of values of t$, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>, spanning the range from their initial values to their final values by calling the reactor model function from step 4 above,</li>
<li>checking that the maximum temperature is less than 95 °C and if it is, setting the processing time for that value of <span class="math inline">\(\dot{V}_{in}\)</span>.</li>
<li>repeating steps 5a through 5c over a range of values of <span class="math inline">\(\dot{V}_{in}\)</span> where the processing time passes through a minimum.</li>
<li>use the resulting optimum value of <span class="math inline">\(\dot{V}_{in}\)</span> to get corresponding sets of values of t$, <span class="math inline">\(n_A\)</span>, <span class="math inline">\(n_W\)</span>, <span class="math inline">\(n_Z\)</span>, <span class="math inline">\(T\)</span>, and <span class="math inline">\(T_{ex}\)</span>, spanning the range from their initial values to their final values by calling the reactor model function from step 4 above, and</li>
<li>generating the graphs as described in step 4 of the calculations summary.</li>
</ol></li>
</ol>
</section>
<section id="results-and-discussion-2" class="level4" data-number="10.5.3.4">
<h4 data-number="10.5.3.4" class="anchored" data-anchor-id="results-and-discussion-2"><span class="header-section-number">10.5.3.4</span> Results and Discussion</h4>
<p>The calculations were performed as described above, and a few of the results are shown in <a href="#tbl-example_10_5_3_results" class="quarto-xref">Table&nbsp;<span>10.7</span></a>. The temperature profile is shown in <a href="#fig-example_10_5_3_temp" class="quarto-xref">Figure&nbsp;<span>10.4</span></a>, and the acetic anhydride concentration profile is shown in <a href="#fig-example_10_5_3_conc" class="quarto-xref">Figure&nbsp;<span>10.5</span></a>. A feed rate of 39.4 cm<sup>3</sup> min<sup>-1</sup> results in the minimum proecssing time, 17.1 min. At the end of processing, the conversion of acetic anhydride is 100 %</p>
<div class="cell">
<div id="tbl-example_10_5_3_results" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-example_10_5_3_results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;10.7: Optimization Results
</figcaption>
<div aria-describedby="tbl-example_10_5_3_results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">item</th>
<th style="text-align: center;">value</th>
<th style="text-align: center;">units</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Minimum Processing Time</td>
<td style="text-align: center;">17.1</td>
<td style="text-align: center;">min</td>
</tr>
<tr class="even">
<td style="text-align: left;">Semi-Batch Processing Time</td>
<td style="text-align: center;">8.88</td>
<td style="text-align: center;">min</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Optimum Feed Rate</td>
<td style="text-align: center;">39.4</td>
<td style="text-align: center;">cm<sup>3</sup> min<sup>-1</sup></td>
</tr>
<tr class="even">
<td style="text-align: left;">Maximum Temperature</td>
<td style="text-align: center;">95</td>
<td style="text-align: center;">°C</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Maximum Cooling Water Temperature</td>
<td style="text-align: center;">77.7</td>
<td style="text-align: center;">°C</td>
</tr>
<tr class="even">
<td style="text-align: left;">Acetic Anhydride Conversion</td>
<td style="text-align: center;">100</td>
<td style="text-align: center;">%</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<div id="fig-example_10_5_3_temp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-example_10_5_3_temp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="examples/reb_10_5_3/temperature_profile.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-example_10_5_3_temp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.4: Temperature profile in the optimized SBSTR
</figcaption>
</figure>
</div>
<div id="fig-example_10_5_3_conc" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-example_10_5_3_conc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="examples/reb_10_5_3/concentration_profile.png" class="img-fluid figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-example_10_5_3_conc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;10.5: Profile of acetic acid concentration in the optimized SBSTR
</figcaption>
</figure>
</div>
<p><a href="#fig-example_10_5_1_temperature_profile" class="quarto-xref">Figure&nbsp;<span>10.3</span></a> shows that the reacting fluid temperature just reaches 95 °C at the end of semi-batch processing. If the acetic anhydride was fed any faster, the temperature would exceed the specified maximum. Lowering the feed rate would increase the processing time. <a href="#tbl-example_10_5_2_results" class="quarto-xref">Table&nbsp;<span>10.4</span></a> shows that the cooling water reaches a maximum temperature of 77.7 °C.</p>
<p><strong>Qualitative Analysis</strong> The shapes of the profile curves are consistent with a qualitative analysis of the process. During semi-batch processing two factors are at work with respect to the reactant concentration and three factors are at work with respect to the temperature. The flow into the reactor tends to increase the reactant concentration while the reaction tends to increase it. <a href="#fig-example_10_5_3_conc" class="quarto-xref">Figure&nbsp;<span>10.5</span></a> shows that the concentration passes through a maximum. Prior to the maximum, the feed is adding A faster than the reaction is consuming it. After the maximum, the opposite is true. Of course increasing the concentration tends to increase the rate and decreasing it tends to decrease the rate.</p>
<p>As for temperature, the cold feed and the cooling water remove heat and tend to lower the temperature while the reaction releases the heat of reaction. <a href="#fig-example_10_5_3_temp" class="quarto-xref">Figure&nbsp;<span>10.4</span></a> shows that initially the temperature drops very slightly. This is a result of the cold feed; heat generation is negligible because the reactant concentration is near zero making the rate very small. As the concentration of A increases the rate increases, which, in turn, increases the amount of heat being added to the system. At about the point where the concentration reaches its maximum, the temperature rise slows. This occurs because the rate is no longer increasing so rapidly. The rising temperature tends to increase it, but the decreasing reactant concentration tends to lower it.</p>
<p>Finally, after all of the A has been added, the remaining A is quickly consumed. At that point, the rate goes to zero and heat is no longer being added to the system. From that point forward, the temperature drops as heat is removed by the cooling water.</p>
</section>
</section>
</section>
<section id="symbols-used-in-sec-4_sbstr_analysis" class="level2" data-number="10.6">
<h2 data-number="10.6" class="anchored" data-anchor-id="symbols-used-in-sec-4_sbstr_analysis"><span class="header-section-number">10.6</span> Symbols Used in <a href="#sec-4_sbstr_analysis" class="quarto-xref"><span>Chapter 10</span></a></h2>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 80%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Symbol</th>
<th style="text-align: left;">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(i\)</span></td>
<td style="text-align: left;">index denoting a reagent.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(k_j\)</span></td>
<td style="text-align: left;">rate coefficient for reaction <span class="math inline">\(j\)</span>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\dot{m}_{ex}\)</span></td>
<td style="text-align: left;">mass flow rate of the heat exchange fluid.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(n_i\)</span></td>
<td style="text-align: left;">molar amount of reagent <span class="math inline">\(i\)</span>; an additional subscripted <span class="math inline">\(0\)</span> indicates the molar amount at time zero.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\dot{n}_{i,in}\)</span></td>
<td style="text-align: left;">net molar flow rate of reagent <span class="math inline">\(i\)</span> into the SBSTR.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(r_{i,j}\)</span></td>
<td style="text-align: left;">rate of generation of reagent <span class="math inline">\(i\)</span> via reaction <span class="math inline">\(j\)</span>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(t\)</span></td>
<td style="text-align: left;">elapsed time.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(A\)</span></td>
<td style="text-align: left;">heat transfer area.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(C_i\)</span></td>
<td style="text-align: left;">molar concentration of reagent <span class="math inline">\(i\)</span>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\hat{C}_{p,i}\)</span></td>
<td style="text-align: left;">molar, constant-pressure heat capacity of reagent <span class="math inline">\(i\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\tilde{C}_{p,ex}\)</span></td>
<td style="text-align: left;">mass-specific, constant-pressure heat capacity of the heat exchange fluid.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\preve{C}_p\)</span></td>
<td style="text-align: left;">volume-specific, constant-pressure heat capacity of the reacting fluid, additional subscripts denote fluids other than the reacting fluid.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(M_{ex}\)</span></td>
<td style="text-align: left;">molecular weight of the heat exchange fluid.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(P\)</span></td>
<td style="text-align: left;">pressure of the reacting fluid, a subscripted <span class="math inline">\(i\)</span> denotes the partial pressure of reagent <span class="math inline">\(i\)</span>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\dot{Q}\)</span></td>
<td style="text-align: left;">rate of heat transfer <em>to</em> the reacting fluid, additional subscripts distinguish between different sources of the heat.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(R\)</span></td>
<td style="text-align: left;">ideal gas constant.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(S_{D/U,inst}\)</span></td>
<td style="text-align: left;">instantaneous selectivity for reagent D over reagent U.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(T\)</span></td>
<td style="text-align: left;">temperature, no subscript denotes the reacting fluid, a subscripted <span class="math inline">\(ex\)</span> denotes the heat exchange fluid, an additional subscripted <span class="math inline">\(0\)</span> denotes an initial temperature, <span class="math inline">\(in\)</span> an inlet temperature and <span class="math inline">\(f\)</span> a final temperature.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(U\)</span></td>
<td style="text-align: left;">heat transfer coefficient.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(V\)</span></td>
<td style="text-align: left;">volume of reacting fluid in the reactor; an additional subscripted <span class="math inline">\(0\)</span> indicates the volume at time zero.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\dot{V}_{in}\)</span></td>
<td style="text-align: left;">volumetric flow rate into the reactor.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\dot{W}\)</span></td>
<td style="text-align: left;">rate at which the reacting fluid performs work on its surroundings.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">%$</td>
<td style="text-align: left;">fraction of the heat exchange fluid that undergoes phase change.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\nu_{i,j}\)</span></td>
<td style="text-align: left;">stoichiometric coefficient of reagent <span class="math inline">\(i\)</span> in reaction <span class="math inline">\(j\)</span>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\rho\)</span></td>
<td style="text-align: left;">density, no subscript denotes the reacting fluid, a subscripted <span class="math inline">\(ex\)</span> denotes the heat exchange fluid.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\Delta H_j\)</span></td>
<td style="text-align: left;">heat of reaction <span class="math inline">\(j\)</span>.</td>
</tr>
</tbody>
</table>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-haldar_experimental_1992" class="csl-entry" role="listitem">
Haldar, Raghunath, and Damaraju Phaneswara Rao. 1992a. <span>“Experimental Studies on Parametric Sensitivity of a Batch Reactor.”</span> <em>Chemical Engineering &amp; Technology</em> 15 (1): 34–38. <a href="https://doi.org/10.1002/ceat.270150107">https://doi.org/10.1002/ceat.270150107</a>.
</div>
<div id="ref-haldar_experimental_1992-1" class="csl-entry" role="listitem">
———. 1992b. <span>“Experimental Studies on Semibatch Reactor Parametric Sensitivity.”</span> <em>Chemical Engineering &amp; Technology</em> 15 (1): 39–43. <a href="https://doi.org/10.1002/ceat.270150108">https://doi.org/10.1002/ceat.270150108</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./section_4_bstr_analysis.html" class="pagination-link" aria-label="BSTR Analysis">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">BSTR Analysis</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./section_4_non_continuous_design.html" class="pagination-link" aria-label="Design of Non-Continuous Reactors">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Design of Non-Continuous Reactors</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>