# Response, Optimization and Design of Reactors {#sec-5_response_opt_design}

This section of *Reaction Engineering Basics* focuses on the reaction engineering analysis of an isolated ideal reactor. The analyses involve only a reactor and no other equipment. This first chapter is not specific to any one type of reactor, it applies equally to reaction engineering of batch stirred-tank reactors (BSTRs), semi-batch stirred-tank reactors (SBSTRs), continuous stirred-tank reactors (CSTRs), and plug-flow reactors (PFRs). It begins by presenting distinguishing characteristics of isolated reactor modeling problems. It then offers a general description of three common reaction engineering tasks: reactor response tasks, reactor optimization tasks, and reactor design tasks. Finally it describes the general approach to modeling isolated reactors that is used to solve response, optimization and design problems in the remaining chapters of this section of *Reaction Engineering Basics*.

## Isolated Ideal Reactor Analysis

Reactors are typically one component of a larger chemical process. That process might include heat exchangers, other reactors, splitting and mixing of fluid streams, and many other types of equipment. Nonetheless, for analysis purposes it often is possible to draw an imaginary box around only the reactor, and treat it as an isolated system. If the reactor is a BSTR, SBSTR, CSTR or PFR, then the system consists of an isolated *ideal* reactor.

@sec-3_design_eqns defined groups of variables and parameters that appear in the model for a generic isolated reactor. They included reactor inputs, reactor outputs, reactor parameters, fluid properties and reaction properties. In the analysis of isolated ideal reactors, the fluid properties (heat capacities, densities, etc.) and reaction properties (rate expressions, heats of reaction, etc.) are known. Consequently, in isolated reactor modeling the quantities appearing in the reactor design equations can be grouped as **reactor inputs, reactor outputs, and process parameters**. 

Recall from @sec-3_design_eqns, the **reactor inputs** consist of the initial molar amounts (or inlet molar flow rates) of every reagent in the system, the initial (or inlet) temperature of the reacting fluid, the inlet mass flow rate and inlet temperature of the heat exchange fluid (if there is one), and, for plug-flow reactors, the inlet pressure of the reacting fluid. The **reactor outputs** consist of the final molar amounts (or outlet molar flow rates) of every reagent in the system, the final (or outlet) temperature of the reacting fluid, the outlet temperature of the heat exchange fluid (if there is one), and, for plug-flow reactors, the outlet pressure of the reacting fluid. The rate at which the reactor does work on its surroundings is also a reactor output, but for the ideal reactors in chemical processing plants, it is almost always negligible. The **process parameters** include the reactor dimensions (volume, length, diameter, etc., as appropriate), the heat transfer area, the heat transfer coefficient, catalyst bed properties (if there is a catalyst bed), and the reaction time (for a closed system) or the space time (for an open system).

The reactor design equations establish a relationship between the reactor inputs, the reactor outputs, and the process parameters. In any isolated reactor modeling assignment, the reaction engineer is given values for some of the inputs, outputs and parameters and tasked with determining the values of the others. Completing the task virtually always entails solving the reactor design equations, but the manner in which they are solved depends upon the nature of the task.

## Common Reaction Engineering Tasks

To simplify the following discussion of reaction engineering tasks, "reactor variables" will be used to refer to the combined reactor inputs, reactor outputs, and process parameters. Three common isolated reactor modeling tasks are reactor response tasks, reactor optimization tasks, and reactor design tasks. **Reactor response tasks**, as defined here, are the most straightforward of the three. In a reactor response assignment the reaction engineer is provided with a sufficient number of reactor variables to allow calculation of all other reactor variables by solving the reactor design equations. Then, knowing *all* of the inputs, outputs and parameters, any other reactor response of interest, for example the conversion or a selectivity, can be calculated. Generally there is a single, correct answer to a reactor response assignment.

There are **two varieties of response tasks**. In one, the assignment provides all of the reactor inputs and process parameters that are needed in order to solve the reactor design equations for the reactor outputs. In *Reaction Engineering Basics* this type of task will be called a **simple response task**. In the other type, the assignment specifies the value of one reactor output or other response and is missing a reactor input or parameter. This kind of task will be called a **specified response task**. When numerical methods are used to solve the reactor design equations, these two types of response task require slightly different computational approaches.

Sometimes it may appear to a student who is just learning reaction engineering that a reactor response assignment does not provide a sufficient number of reactor variables to allow the reactor design equations to be solved. This occurs when the assignment asks for a graph plotting two variables against each other. In this case, the reaction engineer may choose values for one of the variables that span the range of interest, solve the design equations to find the corresponding values of the other variable, and plot the resulting data.

In **optimization tasks** the number of reactor variables that are specified or known is *not* sufficient to allow the reaction engineer to solve the reactor design equations. In lieu of the missing reactor variables, the assignment specifies that the reaction engineer must adjust one or more reactor variables so that the value of another reactor variable, the target variable, is maximized or minimized. The assignment entails finding the optimum value of each adjusted reactor variable *and* the corresponding (minimized or maximized) value of the target variable.

In *Reaction Engineering Basics* almost all optimization tasks will specify only *one* reactor variable to be adjusted and one target variable to be minimized or maximized. A simple optimization assignment like this is almost the same as a response problem that asks for a graph. Again, the reaction engineer can choose values for the adjusted variable, solve the design equations to find the corresponding values of the target variable, and plot the resulting data. To complete the task in this case, the graph must be inspected to identify the value of the adjusted variable where the target variable was mazimized/minimized and the corresponding value of the target variable. Alternatively, instead of plotting the target variables as a function of the adjusted variable, the results can simply be tabulated and the table can be inspected to identify the value of the adjusted variable where the target variable was mazimized/minimized and the corresponding value of the target variable.

Optimization tasks can be much more complicated than that, however. The assignment may specify multiple adjusted variables.  There can also be constraints on the values of reactor variables (not just the ones being adjusted). Constraints are conditions that must be obeyed. An example of a constraint would be that the temperature of the heat exchange fluid cannot exceed some specified value. Constrained, multiple variable optimization assignments will not be considered in *Reaction Engineering Basics*, but they usually can be solved by creating a response function as described below and passing that response function to software that performs constrained optimization.

**Reactor design tasks** are the most complicated of the tasks considered here. A reactor design assignment *does not* provide sufficient information to solve the reactor design equations. The reaction engineer must choose values for the missing reactor variables. In more extreme cases, the assignment may provide little more than the reagents that are available and the products that are to be produced. The type of reactor to use and how to operate it may be among the choices the reaction engineer needs to make.

Design tasks almost always involve an optimization sub-task. The quantity that needs to be maximized is typically financial in nature. The goal is to maximize the rate of making profit subject to both technical and financial constraints. Design at this level is typically taught in chemical engineering courses on plant design, and the system being optimized is typically an entire process, not just an isolated reactor.

That level of design task is well beyond the scope of *Reaction Engineering Basics*. However, highly simplified design tasks are presented herein. In general there are reactor variables that are related to the finances of an overall process. For example, the cost of operating a process may scale with the temperature of that process, in which case minimizing the temperature minimizes the operating cost. Design tasks in *Reaction Engineering Basics* use reactor variables as the quantities to be optimized. In general, there **is not** a single correct solution to a reactor design assignment. Design tasks are inherently “open-ended,” and multiple solutions are possible and acceptable.

## Creating a Response Function for Modeling Isolated Ideal Reactors

@sec-3_design_eqns described how to generate, simplify and solve the reactor design equations for each of the four ideal reactor types. @sec-3_response_func then introduced computer functions that were called response functions. Response functions are useful when numerical methods are used to complete reaction engineering tasks. In chapters [-@sec-4_kin_data_gen] through [-@sec-4_pfr_data_analysis] response functions were used for kinetics data analysis. This section presents an overview of the use of response functions for the completion isolated reactor modeling assignments. The discussion here may seem a bit abstract, but it will be illustrated in every example in Chapters [-@sec-5_bstr_analysis] through [-@sec-5_continuous_design].

@fig-response_fcn, the schematic representation of a response function from @sec-3_response_func, indicated three kinds of arguments that can be passed to response functions. Those argument types are called adjusted values, missing values and solver guesses. Solver guesses are used only when modeling a *steady-state* CSTR. The design equations for a steady-state CSTR are algebraic-transcendental equations (ATEs), and solving them typically requires providing a guess for their solution. The design equations for all the other reactor types considered in *Reaction Engineering Basics* are sets of initial-value, ordinary differential equations (IVODEs) and do not require solver guesses.

An adjusted value argument is used when performing a response task that requires making a graph and for optimization tasks. The adjusted values are typically the values that are plotted on the graph's abscissa ($x$-axis). Depending upon the specifics of the problem, the adjusted values may be passed to the response function all at once (as a vector), or the response function may be called many times, passing one of the adjusted values each time it is called. If the adjusted value is a reactor input or a process parameter, then that quantity is *not* considered a missing value.

A missing value argument is passed to the response function *only* when performing a specified response task. Recall, in a specified response task, the value of one reactor output (or related response) is specified in the assignment and the task is to find the value of the missing reactor input or process parameter that lead to that specified response. Within the response function, that missing value is needed in order to solve the reactor design equations, and that is why it is passed to the response function. Then, within the response function the design equations are solved and the results are used to calculate the specified response (and any other responses of interest).

At first it may seem odd to calculate and return the value of the specified response since its value is known. The reason for this is that doing so allows the response function to be used to calculate the missing reactor input. The response function can be thought of as a mathematical function that gives the value of the specified response as a function of the missing input. This is shown in @eq-resp_func_as_specified_input, where $\Omega$ is used to represent the response function, $x$ represents the missing reactor input or process parameter, and $y$ represents the reactor output variable whose value is specified in the assignment.

$$
\Omega\left(x\right) = y
$${#eq-resp_func_as_specified_input}

If $y$ in @eq-resp_func_as_specified_input is set equal to the value specified in the assignment, $y_{spec}$, the resulting equation is an ATE that can be solved to find the corresponding value of the missing reactor input or process parameter. To do so numerically, the ATE is re-written in the form of a residual equation, @eq-resp_func_as_residual_eqn. The response function can be used to create a function that evaluates the residual, and that function can be passed to an ATE solver along with a guess for the missing input, $x_{miss}$.

$$
\Omega\left(x\right) = y \qquad \Rightarrow \qquad 0 = \Omega\left(x\right) - y_{spec}
$${#eq-resp_func_as_residual_eqn}

After finding value of the missing input, $x_{miss}$, the response function can then be passed that value to find the values of the other responses of interest.

Again, this description may seem abstract at this point, but it should become more concrete upon reading the examples in the chapters that follow this one.

## General Approach to Modeling Isolated Ideal Reactors

A reaction engineer must know two things when given an assignment. The first is how to identify the assignment's type, and the second is the general approach that is used when solving that type of assignment. **Isolated ideal reactor modeling assignments can be identified** by the following distinguishing characteristics.

* The system consists of one ideal reactor and no other equipment.
* The assignment describes the reactor and how it is operated.
* The reactions taking place are known, and rate expressions are available for them.
* The assignment asks for a reactor parameter, a reactor input, or reactor output.

Having identified an assigment as an isolated ideal reactor modeling assignment, **the general approach to completing the assignment** is as follows.

1. Write the reactor design equations for the reactor.
2. Assuming any missing reactor input or process parameter will be available, formulate their solution to find the reactor outputs.
3. Write the ancillary equations needed to calculate the response(s) of interest *and* the specified response if there is one.
4. Create a response function that
	a. receives any missing quantities from step 2 and any adjusted variables as arguments,
	b. solves the design equations for the reactor outputs, and
	c. uses the reactor outputs to calculate and return the responses of interest and the specified response, if there is one.
5. Use the response function to calculate all quantities of interest.
	a. If there are no missing reactor inputs or process parameters, calculate the responses of interest directly using the response function.
	b. If a reactor input or  or process parameter is unknown, use the response function to create a function to evaluate the residual equation as in @eq-resp_func_as_residual_eqn and use it to calculate the missing reactor input or  or process parameter using an ATE solver. Then the result can be passed to the response function to find the other responses of interest.
	c. If a range of values are of interest, repeat step 5a or 5b over the range of interest and tabulate or plot the results.
	d. If a maximum or minimum value is of interest, identify the maximum using the table or plot from step 5c.

## Symbols Used in @sec-5_response_opt_design

| Symbol | Meaning |
|:-------|:--------|
| $\Omega$ | The reactor response function. |
| $x$ | The missing reactor input or process parameter variable. |
| $x_{miss}$ | The value of the missing reactor input or process parameter that gives the response specified in the assignment. |
| $y$ | The reactor output whose value is specified in the assignment. |
| $y_{spec}$ | The specified value of $y$$. |

: {tbl-colwidths="[20,80]"}
